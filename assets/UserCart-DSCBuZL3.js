import{N as C}from"./NavBar-MgmQc8S1.js";import{P as k}from"./PageFooter-DSojNcCN.js";import{_ as V,c as r,b as n,a as e,F as p,d as P,t as _,h as N,r as d,o as c,i as b,v,n as h}from"./index-D4utK-8a.js";const U={data(){return{api_path:"wei123",url:"https://vue3-course-api.hexschool.io",cartProducts:[],cartList:{},form:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{NavBar:C,PageFooter:k},methods:{getCartProducts(){this.$http.get(`${this.url}/v2/api/${this.api_path}/cart`).then(a=>{this.cartProducts=a.data.data.carts,this.cartList=a.data.data}).catch(a=>{console.log(a.response.data.message)})},reviseQty(a,t){this.$http.post(`${this.url}/v2/api/${this.api_path}/cart`,{data:{product_id:a,qty:t}}).then(()=>{alert("修改購物車成功"),this.getCartProducts()}).catch(f=>{console.log(f.message)})},delCartItem(a){this.$http.delete(`${this.url}/v2/api/${this.api_path}/cart/${a}`).then(()=>{alert("已經刪除"),this.getCartProducts()}).cath(t=>{console.log(t.message)})},isPhone(a){return/^(09)[0-9]{8}$/.test(a)?!0:"需要正確的電話號碼"},submitOrder(){this.cartList.carts.length===0&&alert("目前購物車是空的，請加入產品！")}},mounted(){this.getCartProducts()}},q={class:"container-fluid"},w={class:"container py-48"},B=e("h2",{class:"text-center py-60"},"購物車列表",-1),F={class:"table"},L=e("thead",null,[e("tr",null,[e("th",{scope:"col",class:"fs-md-24"},"品名"),e("th",{scope:"col",class:"fs-md-24"},"數量"),e("th",{scope:"col",class:"fs-md-24"},"價格"),e("th")])],-1),j={class:"fs-md-24"},E={class:""},I=["onClick"],O=["onClick"],Q=e("i",{class:"bi bi-trash text-center"},null,-1),S=[Q],T=["onUpdate:modelValue"],D=["onClick"],z={class:"fs-md-24"},A=["onClick"],M=e("td",null,null,-1),X=e("td",null,null,-1),$={class:"fs-md-24"},G={class:"container"},H={class:"row justify-content-center"},J={class:"col-md-6"},K=e("h2",{class:"text-center fs-32 mb-12"},"購物人資料",-1),R={class:"mb-12"},W=e("label",{for:"email",class:"form-label"},"Email",-1),Y={class:"mb-12"},Z=e("label",{for:"inputName",class:"form-label"},"收件人姓名",-1),ee={class:"mb-12"},te=e("label",{for:"inputTelephone",class:"form-label"},"收件人電話",-1),se={class:"mb-12"},le=e("label",{for:"inputAddress",class:"form-label"},"收件人地址",-1),oe={class:"mb-12 d-flex flex-column"},ae=e("label",{for:"textarea",class:"form-label"},"留言",-1),ne={class:"d-flex justify-content-end"};function ie(a,t,f,re,o,i){const g=d("NavBar"),m=d("v-field"),u=d("error-message"),x=d("v-form"),y=d("PageFooter");return c(),r(p,null,[n(g),e("div",q,[e("div",w,[B,e("table",F,[L,e("tbody",null,[(c(!0),r(p,null,P(o.cartProducts,l=>(c(),r("tr",{key:l.id},[e("td",j,_(l.product.title),1),e("td",E,[l.qty>=2?(c(),r("button",{key:0,class:"btn btn-danger me-4 d-flex d-md-inline",onClick:s=>i.reviseQty(l.product.id,-1)}," - ",8,I)):(c(),r("button",{key:1,class:"rounded me-4 btn btn-danger d-flex d-md-inline",style:{width:"35px",height:"38px"},onClick:s=>i.delCartItem(l.id)},S,8,O)),b(e("input",{type:"number",class:"border border-gray border-1 rounded me-4 d-flex d-md-inline",readonly:"",style:{width:"40px",height:"36px"},"onUpdate:modelValue":s=>l.qty=s},null,8,T),[[v,l.qty]]),e("button",{class:"btn btn-blue d-flex d-md-inline",onClick:s=>i.reviseQty(l.product.id,1)}," + ",8,D)]),e("td",z,_(l.final_total),1),e("td",null,[e("button",{class:"btn btn-outline-danger",onClick:s=>i.delCartItem(l.id)}," X ",8,A)])]))),128))]),e("tfoot",null,[M,X,e("td",$,"總計： "+_(o.cartList.final_total),1)])])]),e("div",G,[e("div",H,[e("div",J,[K,n(x,{onSubmit:i.submitOrder,ref:"form"},{default:N(({errors:l})=>[e("div",R,[W,n(m,{id:"email",name:"email",type:"email",class:h(["form-control",{"is-invalid":l.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:o.form.user.email,"onUpdate:modelValue":t[0]||(t[0]=s=>o.form.user.email=s)},null,8,["class","modelValue"]),n(u,{name:"email",class:"invalid-feedback"})]),e("div",Y,[Z,n(m,{type:"text",class:h(["form-control",{"is-invalid":l.姓名}]),id:"inputName",name:"姓名",placeholder:"請輸入姓名",rules:"required",modelValue:o.form.user.name,"onUpdate:modelValue":t[1]||(t[1]=s=>o.form.user.name=s)},null,8,["class","modelValue"]),n(u,{name:"姓名",class:"invalid-feedback"})]),e("div",ee,[te,n(m,{type:"tel",class:h(["form-control",{"is-invalid":l.電話}]),id:"inputTelephone",name:"電話",placeholder:"請輸入電話",rules:i.isPhone,modelValue:o.form.user.tel,"onUpdate:modelValue":t[2]||(t[2]=s=>o.form.user.tel=s)},null,8,["class","rules","modelValue"]),n(u,{name:"電話",class:"invalid-feedback"})]),e("div",se,[le,n(m,{type:"text",class:h(["form-control",{"is-invalid":l.地址}]),id:"inputName",name:"地址",placeholder:"請輸入地址",rules:"required",modelValue:o.form.user.address,"onUpdate:modelValue":t[3]||(t[3]=s=>o.form.user.address=s)},null,8,["class","modelValue"]),n(u,{name:"地址",class:"invalid-feedback"})]),e("div",oe,[ae,b(e("textarea",{name:"textarea",id:"textarea",cols:"30",style:{height:"fit-content"},class:"form-control border border-1 rounded","onUpdate:modelValue":t[4]||(t[4]=s=>o.form.message=s)},null,512),[[v,o.form.message]])]),e("div",ne,[e("button",{type:"submit",class:"btn btn-danger d-flex justify-content-end",onClick:t[5]||(t[5]=s=>i.submitOrder())}," 送出訂單 ")])]),_:1},8,["onSubmit"])])])])]),n(y)],64)}const ue=V(U,[["render",ie]]);export{ue as default};

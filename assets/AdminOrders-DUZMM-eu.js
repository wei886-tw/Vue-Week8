import{A as v}from"./AdminNavBar-NOcm0UcU.js";import{P as w}from"./PageNation-Dm4Jr41p.js";import{m as x}from"./mixin-CE07gU2g.js";import{M as O}from"./modal-BKTe0xB3.js";import{_ as y,l as i,j as e,i as _,F as h,v as p,y as o,G as n,H as r,A as m,k as b,e as d}from"./index-B2aVwq5B.js";const k={components:{AdminNavBar:v,PageNation:w},mixins:[x],data(){return{api:"https://vue3-course-api.hexschool.io",api_path:"wei123",orders:[],ordersPagination:{},tempOrder:{user:""},orderModal:""}},methods:{getOrders(l=1){this.$http.get(`${this.api}/v2/api/${this.api_path}/admin/orders?page=${l}`).then(a=>{this.orders=a.data.orders,this.ordersPagination=a.data.pagination}).catch(a=>{alert(a.response.data.message)})},deleteOrder(l){this.$http.delete(`${this.api}/v2/api/${this.api_path}/admin/order/${l}`).then(()=>{alert("訂單已刪除！"),this.getOrders(1)}).catch(a=>{console.log(a.response.data.message)})},openModal(l){this.tempOrder={...l},console.log(this.tempOrder.user),this.orderModal.show()}},mounted(){this.getOrders(1),this.orderModal=new O(this.$refs.orderModal),this.loadingCircle()}},M={class:"container-fluid px-0"},D={class:"container-fluid px-0"},C={class:"container py-32"},V=e("h2",{class:"text-start mb-16 fs-32 fw-bold"},"訂單列表",-1),N={class:"table"},P=e("thead",null,[e("tr",null,[e("th",{scope:"col",style:{width:"10%"}},"下單時間"),e("th",{scope:"col",style:{width:"15%"}},"訂單編號"),e("th",{scope:"col",style:{width:"10%"}},"價格"),e("th",{scope:"col",style:{width:"10%"}},"是否付款"),e("th",{scope:"col",style:{width:"15%"}},"訂單內容"),e("th",{scope:"col",style:{width:"15%"}},"刪除訂單")])],-1),A={class:"align-center"},B={class:"align-center"},F={class:"align-center"},U={class:"align-center"},L=["onClick"],j=["onClick"],q={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"orderModal"},E={class:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"},T={class:"modal-content"},Y={class:"modal-header bg-dark"},G={class:"modal-title fs-24 text-white ps-32",id:"exampleModalLabel"},H=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),S={class:"modal-body"},z={class:"row"},I={class:"col-4"},J={class:"container d-flex mb-16"},K=e("p",{for:"",class:"mb-8 fs-24 fw-bold ps-32"},"訂單用戶：",-1),Q={class:"fs-20 fw-bold"},R={class:"form-check form-switch mb-16"},W=e("label",{for:"",class:"mb-8"},"Email：",-1),X={class:"form-check form-switch mb-16"},Z=e("label",{for:"",class:"mb-8"},"電話：",-1),$={class:"form-check form-switch mb-16"},ee=e("label",{for:"",class:"mb-8"},"住址：",-1),te={class:"form-check form-switch mb-16"},se=e("label",{for:"",class:"mb-8"},"留言：",-1),oe={class:"col-8"},ae={class:"form-check form-switch mb-16"},le=e("p",{class:"fs-24 fw-bold mb-8"},"訂單狀態：",-1),ie=e("label",{for:"",class:"mb-8"}," 訂單建立時間： ",-1),de={class:"form-check form-switch mb-16"},ne=e("label",{for:"",class:"mb-8"},"訂單付費狀態：",-1),re={class:"form-check form-switch mb-16"},ce=e("label",{for:"",class:"mb-8"},"訂單數量：",-1),me={class:"form-check form-switch mb-16"},_e=e("h3",{class:"fs-24 fw-bold"},"訂購產品：",-1),he={class:"me-8"},pe={class:"me-8"},be=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," 關閉 ")],-1),fe={class:"container d-flex justify-content-end"};function ue(l,a,ge,ve,s,c){const f=b("admin-nav-bar"),u=b("page-nation");return d(),i("div",M,[e("div",D,[_(f)]),e("div",C,[V,e("table",N,[P,e("tbody",null,[(d(!0),i(h,null,p(s.orders,t=>(d(),i("tr",{key:t.id,class:"align-center"},[e("td",A,o(new Date(t.create_at*1e3).getFullYear())+"/"+o(new Date(t.create_at*1e3).getMonth())+"/"+o(new Date(t.create_at*1e3).getDate()),1),e("td",B,o(t.id),1),e("td",F,o(t.total),1),e("td",U,o(t.is_paid?"已付款":"未付款"),1),e("td",null,[e("button",{class:"btn btn-success",onClick:g=>c.openModal(t)}," 訂單內容 ",8,L)]),e("td",null,[e("button",{class:"btn btn-danger",onClick:g=>c.deleteOrder(t.id)}," 刪除訂單 ",8,j)])]))),128))])]),e("div",q,[e("div",E,[e("div",T,[e("div",Y,[e("h5",G," 訂單編號："+o(s.tempOrder.id),1),H]),e("div",S,[e("div",z,[e("div",I,[e("div",J,[K,e("p",Q,o(s.tempOrder.user.name),1)]),e("div",R,[W,n(e("input",{type:"text",name:"",id:"","onUpdate:modelValue":a[0]||(a[0]=t=>s.tempOrder.user.email=t),class:"form-control w-100"},null,512),[[r,s.tempOrder.user.email]])]),e("div",X,[Z,n(e("input",{type:"text",name:"",id:"","onUpdate:modelValue":a[1]||(a[1]=t=>s.tempOrder.user.tel=t),class:"form-control w-100"},null,512),[[r,s.tempOrder.user.tel]])]),e("div",$,[ee,n(e("input",{type:"text",name:"",id:"","onUpdate:modelValue":a[2]||(a[2]=t=>s.tempOrder.user.address=t),class:"form-control w-100"},null,512),[[r,s.tempOrder.user.address]])]),e("div",te,[se,n(e("textarea",{type:"text",name:"",id:"","onUpdate:modelValue":a[3]||(a[3]=t=>s.tempOrder.message=t),class:"form-control w-100"},null,512),[[r,s.tempOrder.message]])])]),e("div",oe,[e("div",ae,[le,ie,m(" "+o(new Date(s.tempOrder.create_at*1e3).getFullYear())+" / "+o(new Date(s.tempOrder.create_at*1e3).getMonth())+" / "+o(new Date(s.tempOrder.create_at*1e3).getDate()),1)]),e("div",de,[ne,m(" "+o(s.tempOrder.is_paid?"已付費":"尚未付費"),1)]),e("div",re,[ce,m(" "+o(s.tempOrder.num),1)]),e("div",me,[_e,(d(!0),i(h,null,p(s.tempOrder.products,t=>(d(),i("div",{class:"container d-flex px-0",key:t.id},[e("p",he,o(t.product.title)+"：",1),e("p",pe,o(t.qty)+" "+o(t.product.unit)+"， ",1),e("p",null,"價格："+o(t.product.price*t.qty),1)]))),128))])])])]),be])])],512),e("div",fe,[_(u,{pagination:s.ordersPagination,"get-page-products":c.getOrders},null,8,["pagination","get-page-products"])])])])}const Me=y(k,[["render",ue]]);export{Me as default};
//# sourceMappingURL=AdminOrders-DUZMM-eu.js.map

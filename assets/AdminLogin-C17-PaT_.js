import{A as c}from"./AdminNavBar-DcYn65sW.js";import{_ as u,l as m,i as p,j as e,E as h,G as i,H as d,F as _,e as f,k as b}from"./index-CvSW9f6W.js";const k={data(){return{user:{username:"",password:""},url:"https://vue3-course-api.hexschool.io",api_path:"wei123"}},components:{AdminNavBar:c},methods:{signIn(){this.$http.post(`${this.url}/v2/admin/signin`,this.user).then(t=>{const{token:s,expired:a}=t.data;document.cookie=`hexToken=${s}; expires=${new Date(a)};`,this.$router.push("/adminProducts")}).catch(t=>{alert(t.response.data.message)})},checkAdmin(){const t=`${this.url}/api/user/check`;this.$http.post(t).then(()=>{}).catch(s=>{alert(s.response.data.message),this.$router.push("/adminLogin")})}},mounted(){const t=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=t,this.checkAdmin()}},w={class:"container py-48"},v={class:"col-md-6"},g=e("h1",{class:"fs-32 mb-3 font-weight-normal"},"請先登入",-1),x={class:"mb-40"},$=e("label",{for:"inputEmail",class:"sr-only"},"Email address",-1),y={class:"mb-40"},A=e("label",{for:"inputPassword",class:"sr-only"},"Password",-1),E={class:"text-end mt-4"};function I(t,s,a,P,n,r){const l=b("admin-nav-bar");return f(),m(_,null,[p(l),e("div",w,[e("form",{class:"row justify-content-center",onSubmit:s[3]||(s[3]=h((...o)=>r.signIn&&r.signIn(...o),["prevent"]))},[e("div",v,[g,e("div",x,[$,i(e("input",{type:"email",id:"inputEmail",class:"form-control",placeholder:"Email address","onUpdate:modelValue":s[0]||(s[0]=o=>n.user.username=o),required:"",autofocus:""},null,512),[[d,n.user.username]])]),e("div",y,[A,i(e("input",{type:"password",id:"inputPassword",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=o=>n.user.password=o),placeholder:"Password",required:""},null,512),[[d,n.user.password]])]),e("div",E,[e("button",{class:"btn btn-lg btn-footer btn-block w-100",type:"submit",onClick:s[2]||(s[2]=(...o)=>r.signIn&&r.signIn(...o))}," 登入 ")])])],32)])],64)}const N=u(k,[["render",I]]);export{N as default};

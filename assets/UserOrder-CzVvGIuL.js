import{N as h}from"./NavBar-wJwWHR78.js";import{P as _}from"./PageFooter-CepcXA6F.js";import{_ as b,c as v,b as o,a as e,w as g,F as x,e as V,r as n,o as y,n as m}from"./index-C5pxEdwr.js";const w={components:{NavBarVue:h,PageFooterVue:_},data(){return{api_path:"wei123",url:"https://vue3-course-api.hexschool.io",cartProducts:[],cartList:{},form:{user:{name:"",email:"",tel:"",address:""},message:""},total:"",create_at:"",orderId:"",data:""}},methods:{emitTotal(){this.$emit("emit-total",this.total)},isPhone(t){return/^(09)[0-9]{8}$/.test(t)?!0:"需要正確的電話號碼"},getCartProducts(){this.$http.get(`${this.url}/v2/api/${this.api_path}/cart`).then(t=>{this.cartProducts=t.data.data.carts,this.cartList=t.data.data}).catch(t=>{console.log(t.response.data.message)})},submitOrder(){this.cartList.carts.length===0?alert("目前購物車是空的，請加入產品！"):this.$http.post(`${this.url}/v2/api/${this.api_path}/order`,{data:{user:{name:this.form.user.name,email:this.form.user.email,tel:this.form.user.tel,address:this.form.user.address},message:this.form.message}}).then(t=>{this.orderId=t.data.orderId,alert("成功送出訂單"),this.$router.push(`/userPayment/${this.orderId}`),this.$refs.form.reset(),this.orderId=t.data.orderId,this.total=t.data.total}).catch(t=>{console.log(t.response.data.message)})}},mounted(){this.getCartProducts()}},N={class:"container-fluid px-0 pt-16"},P=V('<div class="container"><div class="row"><div class="col-md-6 col-lg-8 mx-auto"><ol class="pay-list mt-16 d-flex justify-content-between list-unstyled position-relative"><li class="d-flex flex-column align-items-center"><p class="number d-flex justify-content-center align-items-center number-active mb-8"> 1 </p><p class="fw-bold mb-0">訂單確認</p></li><li class="d-flex flex-column align-items-center"><p class="number d-flex justify-content-center align-items-center mb-8"> 2 </p><p class="fw-bold mb-0">結帳付款</p></li><li class="d-flex flex-column align-items-center"><p class="number d-flex justify-content-center align-items-center mb-8"> 3 </p><p class="fw-bold">訂單結果</p></li></ol></div></div></div>',1),k={class:"container"},j={class:"row justify-content-center"},C={class:"col-md-6"},I={class:"mb-12"},U=e("label",{for:"email",class:"form-label"},null,-1),B={class:"mb-12"},T=e("label",{for:"inputName",class:"form-label"},null,-1),F={class:"mb-12"},O=e("label",{for:"inputTelephone",class:"form-label"},null,-1),q={class:"mb-12"},E=e("label",{for:"inputAddress",class:"form-label"},null,-1),L={class:"mb-24 d-flex flex-column"},A=e("label",{for:"message",class:"form-label"},null,-1),$={class:"d-flex justify-content-center"};function z(t,s,S,D,a,c){const u=n("nav-bar-vue"),r=n("v-field"),i=n("error-message"),f=n("v-form"),p=n("page-footer-vue");return y(),v(x,null,[o(u),e("div",N,[P,e("div",k,[e("div",j,[e("div",C,[o(f,{ref:"form",id:"form"},{default:g(({errors:d})=>[e("div",I,[U,o(r,{id:"email",name:"email",type:"email",class:m(["form-control",{"is-invalid":d.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:a.form.user.email,"onUpdate:modelValue":s[0]||(s[0]=l=>a.form.user.email=l)},null,8,["class","modelValue"]),o(i,{name:"email",class:"invalid-feedback"})]),e("div",B,[T,o(r,{type:"text",class:m(["form-control",{"is-invalid":d.姓名}]),id:"inputName",name:"姓名",placeholder:"請輸入姓名",rules:"required",modelValue:a.form.user.name,"onUpdate:modelValue":s[1]||(s[1]=l=>a.form.user.name=l)},null,8,["class","modelValue"]),o(i,{name:"姓名",class:"invalid-feedback"})]),e("div",F,[O,o(r,{type:"tel",class:m(["form-control",{"is-invalid":d.電話}]),id:"inputTelephone",name:"電話",placeholder:"請輸入電話",rules:c.isPhone,modelValue:a.form.user.tel,"onUpdate:modelValue":s[2]||(s[2]=l=>a.form.user.tel=l)},null,8,["class","rules","modelValue"]),o(i,{name:"電話",class:"invalid-feedback"})]),e("div",q,[E,o(r,{type:"text",class:m(["form-control",{"is-invalid":d.地址}]),id:"inputAddress",name:"地址",placeholder:"請輸入地址",rules:"required",modelValue:a.form.user.address,"onUpdate:modelValue":s[3]||(s[3]=l=>a.form.user.address=l)},null,8,["class","modelValue"]),o(i,{name:"地址",class:"invalid-feedback"})]),e("div",L,[A,o(r,{name:"message",id:"message",cols:"30",style:{height:"fit-content"},class:"form-control border border-1 rounded",modelValue:a.form.message,"onUpdate:modelValue":s[4]||(s[4]=l=>a.form.message=l),as:"textarea",placeholder:"請輸入留言"},null,8,["modelValue"])]),e("div",$,[e("button",{type:"button",class:"btn btn-footer w-100 mb-60",onClick:s[5]||(s[5]=(...l)=>c.submitOrder&&c.submitOrder(...l)),onEmitTotal:s[6]||(s[6]=l=>t.getTotal(a.total))}," 送出訂單 ",32)])]),_:1},512)])])])]),o(p)],64)}const K=b(w,[["render",z]]);export{K as default};

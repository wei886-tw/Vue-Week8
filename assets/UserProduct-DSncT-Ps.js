import{P as L,N as T,c as v}from"./NavBar-cGQiUeEF.js";import{P as j}from"./PageNation-BViz5DCC.js";import{t as S,_ as $,u as y,v as m,l as c,j as t,i as u,F as h,x as _,y as p,f as I,k as f,e as r,g as P,z as l,A as g,B as N,q as B,s as F}from"./index-BNNAF0AP.js";const x=S("favoriteStore",{state:()=>({favoriteList:[],favoriteId:[]}),actions:{handleFavorite(s){const e=this.favoriteList.indexOf(s);e===-1?(this.favoriteList.push(s),alert("已收藏商品！")):(this.favoriteList.splice(e,1),alert("取消收藏商品！")),this.setStorage()},setStorage(){localStorage.setItem("favoriteList",this.favoriteList)},getFavoriteList(){const s=localStorage.getItem("favoriteList");s&&(this.favoriteList=s.split(","))}}}),q={components:{PageFooter:L,NavBar:T,PageNation:j},data(){return{userProducts:[],api:"https://vue3-course-api.hexschool.io",api_path:"wei123",myModal:null,tempProduct:{},searchProducts:["2"],pagination:{},filterProducts:[],category:"",qty:"",favoriteLis:[],myButton:""}},computed:{...y(v,["storeCart"]),...y(x,["favoriteList","favoriteId"])},watch:{},methods:{...m(v,["getCartList"]),...m(x,["handleFavorite","setStorage","getFavoriteList","test"]),changeQty(){this.qty=parseInt(event.target.value)},addToCart(s){this.qty!=""?this.$http.post(`${this.api}/v2/api/${this.api_path}/cart`,{data:{product_id:s,qty:this.qty}}).then(()=>{this.getCartList(),alert("成功加入購物車")}).catch(e=>{console.log(e.response.data.message)}):this.$http.post(`${this.api}/v2/api/${this.api_path}/cart`,{data:{product_id:s,qty:1}}).then(()=>{this.getCartList(),alert("成功加入購物車")}).catch(e=>{console.log(e.response.data.message)})},changeProductType(){this.category=this.$refs.type.value,this.category!="所有產品"?this.$http.get(`${this.api}/v2/api/${this.api_path}/products?category=${this.category}`).then(s=>{this.userProducts=s.data.products,this.pagination=s.data.pagination,this.userProducts=this.userProducts.filter(e=>e.category===this.category),alert(`顯示所有${this.category}產品`)}).catch(s=>{console.log(s.response.data.message)}):this.getProducts(1)},getProducts(s){this.$http.get(`${this.api}/api/${this.api_path}/products?page=${s}`).then(e=>{this.userProducts=e.data.products,this.pagination=e.data.pagination,window.scrollTo(0,0)}).catch(e=>{console.log(e.response.data.message)})},openModal(){this.myModal.show()},searchProduct(){this.title=this.$refs.search.value,this.title!==void 0&&this.title!==""?this.$http.get(`${this.api}/v2/api/${this.api_path}/products/all`).then(s=>{this.userProducts=s.data.products,this.pagination={},this.userProducts=this.userProducts.filter(e=>e.title.includes(this.title)),alert(`搜尋 ${this.title} 的結果`),this.searchProducts=this.userProducts,this.title=""}).catch(s=>{console.log(s.response.data.message)}):alert("請輸入關鍵字")},backToPreviousPage(){this.getProducts(),this.$refs.search.value="",this.$refs.searchMobile.value="",this.searchProduct=["2"],this.$router.go("/userProduct")},searchProductMobile(){this.title=this.$refs.searchMobile.value,this.title!==void 0?this.$http.get(`${this.api}/v2/api/${this.api_path}/products/all`).then(s=>{this.userProducts=s.data.products,this.pagination={},this.userProducts=this.userProducts.filter(e=>e.title.includes(this.title)),alert(`搜尋 ${this.title} 的結果`),this.searchProducts=this.userProducts,this.title=""}).catch(s=>{console.log(s.response.data.message)}):alert("請輸入關鍵字")},loadingCircle(){let s=this.$loading.show({container:this.fullPage?null:this.$refs.formContainer,canCancel:!0,onCancel:this.onCancel});setTimeout(()=>{s.hide()},1e3)}},mounted(){this.loadingCircle(),this.getProducts()}},a=s=>(B("data-v-4253893a"),s=s(),F(),s),M={class:"container-fluid px-0"},Q={class:"container-fluid mx-auto"},V={class:"container pt-48 mx-auto"},U={class:"row mx-auto"},z={class:"col-10 mx-auto"},A=a(()=>t("div",{class:"container d-flex justify-content-between"},null,-1)),O={class:"table d-none d-md-block"},D=a(()=>t("th",{style:{width:"25%"},class:"align-items-bottom p-0"},[t("p",{class:"fs-24 fs-md-32 fs-lg-40"},"所有產品")],-1)),E={style:{width:"60%"}},G={class:"rounded border-2 py-0 bg-footer d-flex justify-content-between align-items-center",style:{height:"48px"}},H={type:"text",class:"rounded border-footer border-5 bg-footer py-0 px-0 form-control",placeholder:"請輸入欲搜尋產品",ref:"search",style:{width:"90%",height:"44px"}},J={for:"input",class:"border-0"},K={style:{width:"15%"}},R=a(()=>t("option",{value:"所有產品",style:{position:"absolute"}}," 所有產品 ",-1)),W=a(()=>t("option",{value:"平板",style:{position:"absolute"}}," 平板 ",-1)),X=a(()=>t("option",{value:"手機",style:{position:"absolute"}}," 手機 ",-1)),Y=a(()=>t("option",{value:"筆電",style:{position:"absolute"}}," 筆電 ",-1)),Z=[R,W,X,Y],tt={class:"pt-32",style:{width:"20%"}},et={class:"container",style:{position:"relative",display:"inline-block"}},st=["src"],ot={class:"pt-32",style:{width:"70%"}},it={class:"mb-16 fs-16 fs-md-24 text-dark"},at={class:"d-none d-md-block",style:{color:"#8e8e8e"}},nt={class:"pt-32 fs-lg-24 fw-bold text-danger"},rt=a(()=>t("p",{class:""},"特價：",-1)),ct={class:"mb-16"},lt=["value"],dt=["onClick"],ht=a(()=>t("i",{class:"bi bi-cart-fill"},null,-1)),ut=["onClick"],_t=a(()=>t("i",{class:"bi bi-heart-fill"},null,-1)),pt={key:0,class:"container"},ft=a(()=>t("p",{class:"pt-32 mb-32 text-center"},"找不到該產品",-1)),gt={class:"container d-flex justify-content-center"},bt=a(()=>t("p",{class:"fs-48 d-md-none text-center mb-16"},"所有產品",-1)),vt={class:"container d-md-none d-flex justify-content-between mb-16"},yt={class:"rounded border-2 py-0 bg-footer d-flex justify-content-between align-items-center",style:{height:"48px",width:"50%"}},mt={type:"text",class:"rounded border-2 border-footer bg-footer py-0 px-0",placeholder:"搜尋產品",ref:"searchMobile",style:{width:"90%",height:"44px"}},Pt={for:"input",class:"border-0"},xt={name:"",class:"btn btn-footer fs-12",ref:"select",style:{width:"40%"}},kt=a(()=>t("option",{value:"所有產品"},"所有產品",-1)),wt=a(()=>t("option",{value:"平板"},"平板",-1)),Ct=a(()=>t("option",{value:"手機"},"手機",-1)),Lt=a(()=>t("option",{value:"筆電"},"筆電",-1)),Tt=[kt,wt,Ct,Lt],jt=a(()=>t("hr",null,null,-1)),St=["onClick"],$t={class:"mb-24 py-16 px-16"},It=["src"],Nt={class:"d-flex flex-column justify-content-between px-32"},Bt={class:"mb-16 text-dark"},Ft={class:"mb-16 text-danger fw-bold"},qt={class:"mb-16",style:{color:"#8e8e8e"}},Mt={class:"container d-flex justify-content-between px-0 mb-16"},Qt=["value"],Vt=["onClick"],Ut=a(()=>t("i",{class:"bi bi-cart-fill"},null,-1)),zt={key:0,class:"container d-md-none"},At=a(()=>t("p",{class:"pt-32 mb-32 text-center"},"找不到該產品",-1)),Ot={class:"container d-flex justify-content-center"},Dt={key:0,class:"container d-flex justify-content-center"},Et={class:"container px-0 pt-32"},Gt={class:"container-fluid px-0"};function Ht(s,e,Jt,Kt,d,i){const k=f("NavBar"),b=f("router-link"),w=f("PageNation"),C=f("PageFooter");return r(),c(h,null,[t("div",M,[u(k)]),t("div",Q,[t("div",V,[t("div",U,[t("div",z,[A,t("table",O,[t("thead",null,[t("tr",null,[D,t("th",E,[t("div",G,[t("input",H,null,512),t("button",J,[t("i",{class:"bi bi-search fs-12 fs-md-16 fs-lg-24 pe-8 text-dark bg-footer border-dark",onClick:e[0]||(e[0]=(...o)=>i.searchProduct&&i.searchProduct(...o))})])])]),t("th",K,[t("select",{name:"",id:"",class:"rounded border-2 btn btn-footer",style:{width:"132px",height:"48px",position:"relative"},ref:"type",onChange:e[1]||(e[1]=(...o)=>i.changeProductType&&i.changeProductType(...o))},Z,544)])])]),t("tbody",null,[(r(!0),c(h,null,_(d.userProducts,o=>(r(),c("tr",{key:o.id},[t("td",tt,[t("div",et,[t("img",{src:o.imageUrl,alt:"商品圖片",style:{height:"240px",width:"240px","object-fit":"cover",position:"relative"},class:"mb-16 d-block"},null,8,st)])]),t("td",ot,[u(b,{to:`/userProductInfo/${o.id}`},{default:P(()=>[t("h5",it,l(o.title),1)]),_:2},1032,["to"]),t("p",at," 產品描述："+l(o.description),1)]),t("td",nt,[rt,t("p",ct,l(o.price),1),t("select",{class:"rounded border-2 mb-16",name:"num",style:{width:"100%"},ref_for:!0,ref:"qty",onChange:e[2]||(e[2]=(...n)=>i.changeQty&&i.changeQty(...n))},[(r(),c(h,null,_(10,n=>t("option",{value:n,key:n},l(n),9,lt)),64))],544),t("button",{class:"btn btn-footer hover mb-16 color",style:{width:"100%"},onClick:n=>i.addToCart(o.id)},[ht,g(" 加入購物車 ")],8,dt),t("button",{class:N(["btn btn-footer hover mb-16 color",s.favoriteList.indexOf(o.id)===-1?"btn-footer":"hovered"]),style:{width:"100%"},onClick:n=>s.handleFavorite(o.id),id:"myButton"},[_t,g("  加入收藏 ")],10,ut)])]))),128))]),d.searchProducts.length===0?(r(),c("div",pt,[ft,t("div",gt,[t("button",{class:"btn btn-footer w-50",onClick:e[3]||(e[3]=(...o)=>i.backToPreviousPage&&i.backToPreviousPage(...o))}," 返回上一頁 ")])])):p("",!0)]),bt,t("div",vt,[t("div",yt,[t("input",mt,null,512),t("button",Pt,[t("i",{class:"bi bi-search fs-12 fs-md-16 fs-lg-24 pe-8 text-dark",onClick:e[4]||(e[4]=(...o)=>i.searchProductMobile&&i.searchProductMobile(...o))})])]),t("select",xt,Tt,512),jt]),(r(!0),c(h,null,_(d.userProducts,o=>(r(),c("div",{class:"d-md-none d-flex justify-content-between",key:o.id,onClick:n=>d.tempProduct=o},[t("div",$t,[t("img",{src:o.imageUrl,alt:"商品圖片",style:{height:"280px",width:"95%","object-fit":"cover"},class:"mb-16"},null,8,It),t("div",Nt,[u(b,{to:`/userProductInfo/${o.id}`,target:"_blank"},{default:P(()=>[t("h5",Bt,l(o.title),1)]),_:2},1032,["to"]),t("p",Ft," 特價："+l(o.price)+" 元 ",1),t("p",qt,l(o.description),1),t("div",Mt,[t("select",{class:"btn btn-footer fs-14",style:{width:"45%"},ref_for:!0,ref:"qty",onChange:e[5]||(e[5]=(...n)=>i.changeQty&&i.changeQty(...n))},[(r(),c(h,null,_(10,n=>t("option",{value:n,key:n},l(n),9,Qt)),64))],544),t("button",{class:"btn btn-footer fs-14 hover",style:{width:"45%"},onClick:n=>i.addToCart(o.id)},[Ut,g(" 加入購物車 ")],8,Vt)])])])],8,St))),128)),d.searchProducts.length===0?(r(),c("div",zt,[At,t("div",Ot,[t("button",{class:"btn btn-footer w-50",onClick:e[6]||(e[6]=(...o)=>i.backToPreviousPage&&i.backToPreviousPage(...o))}," 返回上一頁 ")])])):p("",!0)])])]),i.searchProduct.length!==0?(r(),c("div",Dt,[t("button",{class:"btn btn-footer w-50",onClick:e[7]||(e[7]=(...o)=>i.backToPreviousPage&&i.backToPreviousPage(...o))}," 返回上一頁 ")])):p("",!0),t("div",Et,[d.userProducts.length!==0?(r(),I(w,{key:0,class:"d-flex justify-content-center",pagination:d.pagination,"get-page-products":i.getProducts},null,8,["pagination","get-page-products"])):p("",!0)])]),t("div",Gt,[u(C)])],64)}const Yt=$(q,[["render",Ht],["__scopeId","data-v-4253893a"]]);export{Yt as default};

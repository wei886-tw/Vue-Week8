{"version":3,"file":"UserPayment-CCfpo7Zc.js","sources":["../../src/views/UserPayment.vue"],"sourcesContent":["<template>\n  <div class=\"container-fluid px-0\">\n    <NavBar />\n  </div>\n\n  <div class=\"container-fluid px-0 py-32 vh-100 mb-32\">\n    <div class=\"container\">\n      <div class=\"row\">\n        <div class=\"col-sm-6 col-lg-8 mx-auto\">\n          <ol\n            class=\"pay-list pt-32 mb-32 d-flex justify-content-between list-unstyled position-relative\"\n          >\n            <li class=\"d-flex flex-column align-items-center\">\n              <p\n                class=\"number number-active d-flex justify-content-center align-items-center mb-8\"\n              >\n                1\n              </p>\n              <p class=\"fw-bold mb-0\">訂單確認</p>\n            </li>\n            <li class=\"d-flex flex-column align-items-center\">\n              <p\n                class=\"number number-active d-flex justify-content-center align-items-center mb-8\"\n              >\n                2\n              </p>\n              <p class=\"fw-bold\">結帳付款</p>\n            </li>\n            <li class=\"d-flex flex-column align-items-center\">\n              <p\n                class=\"number d-flex justify-content-center align-items-center mb-8\"\n              >\n                3\n              </p>\n              <p class=\"fw-bold\">訂單結果</p>\n            </li>\n          </ol>\n\n          <div\n            class=\"container px-0 border-2 border-dark border-top border-bottom mb-32\"\n          >\n            <div class=\"container d-flex justify-content-between pt-8 mb-8\">\n              <p>訂單編號：</p>\n              <p class=\"text-end\">{{ id }}</p>\n            </div>\n            <div class=\"container d-flex justify-content-between pt-8 mb-8\">\n              <p>繳費狀態：</p>\n              <p>{{ is_paid ? \"已付款\" : \"尚未付款\" }}</p>\n            </div>\n            <div class=\"container d-flex justify-content-between mb-8\">\n              <p>訂單總額：</p>\n              <p>{{ Math.floor(total) }}</p>\n            </div>\n          </div>\n\n          <div class=\"container px-0 position-relative\">\n            <v-form v-slot=\"{ errors }\">\n              <v-field\n                name=\"付款方式\"\n                id=\"payment\"\n                class=\"w-100 border-2 mb-32 form-control\"\n                :class=\"{ 'is-invalid': errors['付款方式'] }\"\n                placeholder=\"請選擇付款方式\"\n                ref=\"paymentMethod\"\n                rules=\"required\"\n                @change=\"selectChange\"\n                as=\"select\"\n              >\n                <option value=\"\" disabled selected>\n                  請選擇付款方式\n                </option>\n                <option value=\"刷卡\">刷卡</option>\n                <option value=\"ATM 繳費\">ATM 繳費</option>\n              </v-field>\n              <error-message name=\"付款方式\" class=\"invalid-feedback\"\n                ><span class=\"text-danger\">付款方式必選</span></error-message\n              >\n            </v-form>\n            <button\n              class=\"btn btn-footer hover w-100\"\n              @click=\"payBill(id)\"\n              v-on:emit-is-paid-out=\"getEmit(paid)\"\n            >\n              結帳付款\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"container-fluid px-0\">\n    <PageFooter />\n  </div>\n</template>\n\n\n<script>\nimport NavBar from \"@/components/NavBar.vue\";\nimport PageFooter from \"@/components/PageFooter.vue\";\n\nexport default {\n  props: [\"id\"],\n  components: { NavBar, PageFooter },\n  data() {\n    return {\n      api_path: import.meta.env.VITE_PATH,\n      url: import.meta.env.VITE_API,\n      cartList: {},\n      form: {\n        user: {\n          name: \"\",\n          email: \"\",\n          tel: \"\",\n          address: \"\",\n        },\n        message: \"\",\n      },\n      paymentMethod: \"\",\n      total: 123,\n      is_paid: true,\n    };\n  },\n\n  methods: {\n    emitIsPaidOut() {\n      this.$emit(\"is-paid\", this.is_paid);\n    },\n\n    getOrder() {\n      this.$http\n        .get(`${this.url}/v2/api/${this.api_path}/order/${this.id}`)\n        .then((res) => {\n          this.is_paid = res.data.order.is_paid;\n          this.total = res.data.order.total;\n          this.$emit(\"emit-total\", this.total);\n        })\n        .catch((err) => {\n          console.log(err.response.data.message);\n        });\n    },\n\n    getCartProducts() {\n      this.$http\n        .get(`${this.url}/v2/api/${this.api_path}/cart`)\n        .then((res) => {\n          this.cartProducts = res.data.data.carts;\n          this.cartList = res.data.data;\n        })\n        .catch((err) => {\n          console.log(err.response.data.message);\n        });\n    },\n\n    payBill(id) {\n      this.$http\n        .post(`${this.url}/v2/api/${this.api_path}/pay/${id}`)\n        .then(() => {\n          alert(\"成功付款\");\n          this.$router.push(`/userOrderResult/${id}`);\n        })\n        .catch((err) => {\n          console.log(err.response.data.message);\n        });\n    },\n\n    selectChange() {\n      this.paymentMethod = this.$refs.paymentMethod.value;\n    },\n  },\n\n  mounted() {\n    this.getCartProducts();\n    this.getOrder();\n  },\n};\n</script>\n\n<style >\n.number {\n  border: 1px solid #000;\n  border-radius: 50%;\n  width: 32px;\n  height: 32px;\n  background-color: white;\n  z-index: 1;\n  font-weight: bold;\n}\n@media (min-width: 768px) {\n  .number {\n    width: 48px;\n    height: 48px;\n    font-size: 24px;\n  }\n}\n.number-active {\n  background-color: black;\n  color: white;\n}\n\n.pay-list::before {\n  content: \"\";\n  width: 87%;\n  height: 1px;\n  background-color: black;\n  transform: translate(-50%, -50%);\n  left: 50%;\n  top: 50%;\n  position: absolute;\n  z-index: 1;\n}\n\n.btn.hover:hover {\n  background-color: black;\n  color: white;\n}\n</style>"],"names":["_sfc_main","NavBar","PageFooter","res","err","id","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_createStaticVNode","_hoisted_7","_hoisted_8","_hoisted_9","_createElementVNode","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_openBlock","_createElementBlock","_Fragment","_createVNode","_component_NavBar","_toDisplayString","$props","$data","_component_v_form","_withCtx","errors","_component_v_field","_normalizeClass","$options","_hoisted_16","_component_error_message","_cache","$event","_ctx","_component_PageFooter"],"mappings":"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"}
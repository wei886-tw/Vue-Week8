import{A as y}from"./AdminNavBar-ZMhXckbH.js";import{_ as g,o as a,c as n,a as t,l as v,g as x,j as i,v as c,F as f,b as u,p as U,f as k,w,e as r,r as _}from"./index-BmGdtGRh.js";const $={data(){return{api:"https://vue3-course-api.hexschool.io",api_path:"wei123",myModal:"",imageUrl:"",isCover:!1}},methods:{checkAdmin(){const l=`${this.api}/api/user/check`;this.$http.post(l).then(()=>{}).catch(e=>{alert(e.response.data.message),this.$router.push("/adminLogin")})},submitImgUrl(){const e=this.$refs.dropArea.files[0],p=new FormData;p.append("file-to-upload",e),this.$http.post(`${this.api}/v2/api/${this.api_path}/admin/upload`,p).then(m=>{this.imageUrl=m.data.imageUrl,this.$emit("emit-imgUrl",this.imageUrl),this.imageUrl=""}).catch(m=>{console.log(m.response.data.message)})}},mounted(){const l=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=l,this.checkAdmin()}},C={type:"button",class:"btn btn-primary w-100","data-bs-toggle":"modal","data-bs-target":"#exampleModal",ref:"btn"},A={ref:"uploadImageModal",class:"modal fade","aria-hidden":"true",id:"exampleModal","aria-labelledby":"uploadImageModal",tabindex:"-1"},I={class:"modal-dialog modal-lg modal-dialog-centered"},V={class:"modal-content"},M={class:"modal-header"},D={key:0,class:"modal-title text-bold fw-bold"},N={key:1,class:"modal-title text-bold fw-bold"},P=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),j={class:"modal-body container"},B={class:"row g-16"},F={class:"col-12 col-md-4"},S={class:"drop-area ratio-1x1"},T=["src"],E={key:2},z={class:"col-12 col-md-8"},L=t("p",{class:"mb-16"}," 僅限使用 jpg、jpeg 與 png 格式，檔案大小限制為 3MB 以下 ",-1),q={ref:"imgForm"},G={class:"form-control",type:"file",ref:"dropArea",name:"file-to-upload"},H={class:"modal-footer"};function J(l,e,p,m,s,d){return a(),n(f,null,[t("button",C," 新增圖片 ",512),t("div",A,[t("div",I,[t("div",V,[t("div",M,[s.isCover?(a(),n("h5",D,"上傳封面")):(a(),n("h5",N,"上傳圖片")),P]),t("div",j,[t("div",B,[t("div",F,[t("div",S,[s.imageUrl?(a(),n("div",{key:0,style:v(`background-image:url(${s.imageUrl})`),class:"w-100 h-100"},null,4)):x("",!0),s.imageUrl?(a(),n("img",{key:1,src:s.imageUrl,alt:"picture",style:{width:"250px","object-fit":"cover"}},null,8,T)):(a(),n("p",E,"圖片預覽"))])]),t("div",z,[L,t("form",q,[i(t("input",{class:"form-control mb-16",type:"text",ref:"imgInput",id:"test",placeholder:"請填入圖片網址","onUpdate:modelValue":e[0]||(e[0]=h=>s.imageUrl=h)},null,512),[[c,s.imageUrl]]),t("input",G,null,512)],512)])])]),t("div",H,[t("button",{type:"button",class:"btn btn-dark",onClick:e[1]||(e[1]=(...h)=>d.submitImgUrl&&d.submitImgUrl(...h))}," 送出 ")])])])],512)],64)}const K=g($,[["render",J]]),O={components:{AdminNavBar:y,UploadImageModal:K},data(){return{myModal:null,tempArticleInfo:{imageUrl:""},imageUrl:"",title:"",content:"",author:"",articleCategory:"",tag:[],description:"",isPublic:!0,create_at:"",url:"https://vue3-course-api.hexschool.io",api_path:"wei123"}},methods:{getUrl(l){this.imageUrl=l},postArticle(){this.create_at=new Date().getTime(),this.$http.post(`${this.url}/v2/api/${this.api_path}/admin/article`,{data:{title:this.title,description:this.description,image:this.imageUrl,tag:this.tag,create_at:this.create_at,author:this.author,isPublic:this.isPublic,content:this.content}}).then(()=>{alert("文章建立成功"),this.$refs.form.reset(),this.imageUrl=""}).catch(l=>{console.log(l.response.data.message)})}}},Q={class:"container-fluid"},R={class:"container py-48"},W={ref:"form"},X={class:"row"},Y={class:"col"},Z=t("label",{class:"fs-24 mb-8",for:"title"},[r("文章標題"),t("span",{class:"text-danger"},"*")],-1),tt={class:"row"},et={class:"col-6"},st=t("label",{class:"fs-24",for:"author"},[r(" 文章作者"),t("span",{class:"text-danger"},"*")],-1),ot={class:"col-6"},lt=t("label",{class:"fs-24",for:"articleCategory"},[r(" 文章分類"),t("span",{class:"text-danger"},"*")],-1),it=t("p",null,[r(" 點擊帶入文章分類： "),t("button",{class:"btn btn-gray me-8"},"最新消息"),t("button",{class:"btn btn-gray me-8"},"活動講座"),t("button",{class:"btn btn-gray me-8"},"專欄講座")],-1),at={class:"row mb-24"},nt={class:"col"},ct=t("label",{class:"fs-24",for:"tag"},[r("文章標籤"),t("span",{class:"text-danger"},"*")],-1),rt=t("label",{class:"fs-24",for:"description"},[r("文章簡述"),t("span",{class:"text-danger"},"*")],-1),dt=t("label",{class:"fs-24",for:"description"},[r("文章內容"),t("span",{class:"text-danger"},"*")],-1),mt=t("h3",{class:"fs-24 mb-16"},"封面圖片",-1),ht={class:"card mb-32",style:{width:"240px"}},pt=["src"],ut={class:"card-body"},_t={class:"row"},gt={class:"col-6"},ft=t("h3",{class:"fs-24"},"文章發佈狀態",-1),bt={class:"form-check form-switch"},yt={class:"form-check-label",for:"flexSwitchCheckDefault"},vt={class:"col-6 d-flex justify-content-end"};function xt(l,e,p,m,s,d){const h=_("admin-nav-bar"),b=_("upload-image-modal");return a(),n(f,null,[u(h),t("div",Q,[t("div",R,[t("form",W,[t("div",X,[t("div",Y,[Z,i(t("input",{type:"text",class:"rounded mb-32 form-check-input",style:{width:"100%",height:"40px"},"onUpdate:modelValue":e[0]||(e[0]=o=>s.title=o),name:"title",id:"title"},null,512),[[c,s.title]])])]),t("div",tt,[t("div",et,[st,i(t("input",{type:"text",class:"rounded mb-32 form-check-input",style:{width:"100%",height:"40px"},placeholder:"請填入作者",name:"author",id:"author","onUpdate:modelValue":e[1]||(e[1]=o=>s.author=o)},null,512),[[c,s.author]])]),t("div",ot,[lt,i(t("input",{type:"text",class:"rounded mb-16 form-check-input",style:{width:"100%",height:"40px"},placeholder:"請填入文章分類",name:"articleCategory",id:"articleCategory","onUpdate:modelValue":e[2]||(e[2]=o=>s.articleCategory=o)},null,512),[[c,s.articleCategory]]),it])]),t("div",at,[t("div",nt,[ct,i(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=o=>s.tag=o),class:"rounded mb-24 form-check-input",name:"tag",id:"tag",style:{width:"100%",height:"40px"},placeholder:"請填入文章標籤"},null,512),[[c,s.tag]]),rt,i(t("textarea",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.description=o),class:"rounded mb-24 form-check-input",style:{width:"100%",height:"120px"},placeholder:"請填入 100 字內描述",name:"description",id:"description"},null,512),[[c,s.description]]),dt,i(t("textarea",{type:"text","onUpdate:modelValue":e[5]||(e[5]=o=>s.content=o),class:"rounded mb-24 form-check-input",style:{width:"100%",height:"240px"},placeholder:"請輸入文章內容",name:"content",id:"content"},null,512),[[c,s.content]])])]),mt,t("div",ht,[t("img",{src:s.imageUrl,class:"card-img-top"},null,8,pt),t("div",ut,[u(b,{onEmitImgUrl:d.getUrl},null,8,["onEmitImgUrl"])])]),t("div",_t,[t("div",gt,[ft,t("div",bt,[i(t("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault","onUpdate:modelValue":e[6]||(e[6]=o=>s.isPublic=o)},null,512),[[U,s.isPublic]]),t("label",yt,k(s.isPublic?"文章公開":"文章不公開"),1)])]),t("div",vt,[t("button",{class:"btn btn-dark",onClick:e[7]||(e[7]=w((...o)=>d.postArticle&&d.postArticle(...o),["prevent"]))},"送出文章")])])],512)])])],64)}const wt=g(O,[["render",xt]]);export{wt as default};

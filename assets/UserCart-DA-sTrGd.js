import{N as v}from"./NavBar-8kYfSEUy.js";import{P as y}from"./PageFooter-DVM3x2OX.js";import{_ as b,c as l,b as h,a as t,F as p,g as x,t as d,r as _,o as i,i as P,v as C,p as w,f as $}from"./index-D-i5_G3X.js";const k={props:["finalTotal"],data(){return{api_path:"wei123",url:"https://vue3-course-api.hexschool.io",selectValue:"",cartProducts:[],cartList:{},final_total:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{NavBar:v,PageFooter:y},methods:{getCartProducts(){this.$http.get(`${this.url}/v2/api/${this.api_path}/cart`).then(e=>{this.cartProducts=e.data.data.carts,this.cartList=e.data.data}).catch(e=>{console.log(e.response.data.message)})},reviseQty(e,o){this.$http.post(`${this.url}/v2/api/${this.api_path}/cart`,{data:{product_id:e,qty:o}}).then(()=>{alert("修改購物車成功"),this.getCartProducts()}).catch(u=>{console.log(u.response.data.message)})},delCartItem(e){this.$http.delete(`${this.url}/v2/api/${this.api_path}/cart/${e}`).then(()=>{alert("已經刪除"),this.getCartProducts()}).cath(o=>{console.log(o.message)})},enterPayment(){this.$router.push("/userOrder"),window.scrollTo(0,0),this.$emit("emit-cart-list",this.cartList)}},mounted(){this.getCartProducts()}},n=e=>(w("data-v-1e9d66c7"),e=e(),$(),e),F={class:"container-fluid",style:{"min-height":"100vh"}},V={class:"container py-48"},B=n(()=>t("h2",{class:"text-center py-60 fs-24 fs-lg-32"},"購物車列表",-1)),I={class:"container-sm"},N={class:"table table-responsive"},T=n(()=>t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"fs-md-24"},"品名"),t("th",{scope:"col",class:"fs-md-24"},"圖片"),t("th",{scope:"col",class:"fs-md-24"},"數量"),t("th",{scope:"col",class:"fs-md-24"},"價格")])],-1)),L={class:"fs-md-24 align-middle"},S={class:"align-middle"},U=["src"],j={class:"align-middle"},q=["onClick"],Q=["onClick"],D=n(()=>t("i",{class:"bi bi-trash text-center"},null,-1)),R=[D],E=["onUpdate:modelValue"],M=["onClick"],O={class:"fs-md-24 align-middle"},z=n(()=>t("td",null,null,-1)),A=n(()=>t("td",null,null,-1)),G=n(()=>t("td",null,null,-1)),H={class:"fs-md-24 pt-32"},J={class:"container d-flex justify-content-between"},K=n(()=>t("p",null,"原價:",-1)),W=n(()=>t("p",null,"折扣:",-1)),X={class:"container d-flex px-0 justify-content-end"},Y={class:"container"};function Z(e,o,u,tt,r,a){const m=_("NavBar"),f=_("PageFooter"),g=_("RouterView");return i(),l(p,null,[h(m,{cartProducts:r.cartProducts},null,8,["cartProducts"]),t("div",F,[t("div",V,[B,t("div",I,[t("table",N,[T,t("tbody",null,[(i(!0),l(p,null,x(r.cartProducts,s=>(i(),l("tr",{key:s.id},[t("td",L,d(s.product.title),1),t("td",S,[t("img",{src:s.product.imageUrl,alt:"產品圖片",style:{height:"100px",weight:"100px"}},null,8,U)]),t("td",j,[s.qty>=2?(i(),l("button",{key:0,class:"btn d-flex d-md-inline",onClick:c=>a.reviseQty(s.product.id,-1)}," - ",8,q)):(i(),l("button",{key:1,class:"rounded btn d-flex d-md-inline",style:{width:"35px",height:"38px"},onClick:c=>a.delCartItem(s.id)},R,8,Q)),P(t("input",{type:"number",class:"border border-gray border-1 rounded me-4 d-flex d-md-inline",style:{width:"100px",height:"36px"},"onUpdate:modelValue":c=>s.qty=c},null,8,E),[[C,s.qty]]),t("button",{class:"btn d-flex d-md-inline",onClick:c=>a.reviseQty(s.product.id,1)}," + ",8,M)]),t("td",O,d(s.final_total),1)]))),128))]),t("tfoot",null,[z,A,G,t("td",H,[t("div",J,[K,t("p",null,"$"+d(r.cartList.final_total),1)]),t("div",{class:"container d-flex justify-content-between",onFinalTotal:o[0]||(o[0]=(...s)=>e.getFinalTotal&&e.getFinalTotal(...s))},[W,t("p",null,"$"+d(),1)],32)])])]),t("div",X,[t("button",{type:"button",class:"btn w-50 mb-60 btn-footer",onClick:o[1]||(o[1]=(...s)=>a.enterPayment&&a.enterPayment(...s))}," 進入付款頁面 ")])])])]),h(f),t("div",Y,[h(g)])],64)}const nt=b(k,[["render",Z],["__scopeId","data-v-1e9d66c7"]]);export{nt as default};

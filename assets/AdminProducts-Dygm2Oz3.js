import{A as _}from"./AdminNavBar-DQFTXGU9.js";import{P as g}from"./PageNation-xxMvww-I.js";import{_ as m,c as a,b as r,a as t,F as d,d as f,r as l,o,f as c}from"./index-CM7vr6tA.js";/* empty css                                                    */const k={components:{AdminNavBar:_,PageNation:g},data(){return{allProducts:[],url:"https://vue3-course-api.hexschool.io",api_path:"wei123",pagination:{}}},methods:{checkAdmin(){const s=`${this.url}/api/user/check`;this.$http.post(s).then(()=>{this.getPageProducts()}).catch(e=>{alert(e.response.data.message),this.$router.push("/adminLogin")})},getPageProducts(s=1){this.$http.get(`${this.url}/v2/api/${this.api_path}/admin/products?page=${s}`).then(e=>{this.pagination=e.data.pagination,this.allProducts=e.data.products}).catch(e=>{console.log(e.response.data.message),console.log(e.request.responseURL)})}},mounted(){const s=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=s,this.checkAdmin()}},P={class:"container py-48 bg-secondary"},$=t("h2",{class:"text-center fs-16 fs-md-24 fs-lg-32"},"後台產品列表",-1),y={class:"table mt-4"},b=t("thead",null,[t("tr",null,[t("th",{width:"120"},"分類"),t("th",null,"產品名稱"),t("th",{width:"120"},"原價"),t("th",{width:"120"},"售價"),t("th",{width:"100"},"是否啟用")])],-1),v={key:0,class:""},x={key:1,class:"text-danger"},A={class:"container"};function w(s,e,B,N,i,p){const h=l("admin-nav-bar"),u=l("page-nation");return o(),a(d,null,[r(h),t("div",P,[$,t("table",y,[b,t("tbody",null,[(o(!0),a(d,null,f(i.allProducts,n=>(o(),a("tr",{key:n.id},[t("td",null,c(n.category),1),t("td",null,c(n.title),1),t("td",null,c(n.origin_price),1),t("td",null,c(n.price),1),t("td",null,[n.is_enabled?(o(),a("span",v,"啟用")):(o(),a("span",x,"未啟用"))])]))),128))])])]),t("div",A,[r(u,{class:"d-flex justify-content-end",pagination:i.pagination,"get-page-products":p.getPageProducts},null,8,["pagination","get-page-products"])])],64)}const q=m(k,[["render",w]]);export{q as default};

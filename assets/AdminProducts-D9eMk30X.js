import{A as _}from"./AdminNavBar-CHfICFNI.js";import{P as g}from"./PageNation-CgOl7Fct.js";import{_ as m,c as n,b as r,a as t,F as d,i as f,r as l,o,t as i}from"./index-D7aUUaSc.js";const k={components:{AdminNavBar:_,PageNation:g},data(){return{allProducts:[],url:"https://vue3-course-api.hexschool.io",api_path:"wei123",pagination:{}}},methods:{checkAdmin(){const s=`${this.url}/api/user/check`;this.$http.post(s).then(()=>{this.getPageProducts()}).catch(e=>{alert(e.response.data.message),this.$router.push("/adminLogin")})},getPageProducts(s=1){this.$http.get(`${this.url}/v2/api/${this.api_path}/admin/products?page=${s}`).then(e=>{this.pagination=e.data.pagination,this.allProducts=e.data.products}).catch(e=>{alert(e.response.data.message)})}},mounted(){const s=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=s,this.checkAdmin()}},P={class:"container py-48"},$=t("h2",{class:"text-center fs-16 fs-md-24 fs-lg-32"},"後台產品列表",-1),v={class:"table mt-4"},x=t("thead",null,[t("tr",null,[t("th",{width:"120"},"分類"),t("th",null,"產品名稱"),t("th",{width:"120"},"原價"),t("th",{width:"120"},"售價"),t("th",{width:"100"},"是否啟用")])],-1),y={key:0,class:""},b={key:1,class:"text-danger"},A={class:"container d-flex justify-content-end"};function w(s,e,B,N,c,h){const p=l("admin-nav-bar"),u=l("page-nation");return o(),n(d,null,[r(p),t("div",P,[$,t("table",v,[x,t("tbody",null,[(o(!0),n(d,null,f(c.allProducts,a=>(o(),n("tr",{key:a.id},[t("td",null,i(a.category),1),t("td",null,i(a.title),1),t("td",null,i(a.origin_price),1),t("td",null,i(a.price),1),t("td",null,[a.is_enabled?(o(),n("span",y,"啟用")):(o(),n("span",b,"未啟用"))])]))),128))])])]),t("div",A,[r(u,{class:"",pagination:c.pagination,"get-page-products":h.getPageProducts},null,8,["pagination","get-page-products"])])],64)}const j=m(k,[["render",w]]);export{j as default};

import{N as v}from"./NavBar-BTzUxTZI.js";import{P as y}from"./PageFooter-BpEMEKNX.js";import{_ as b,c as l,a as t,b as r,F as p,j as x,t as h,r as _,o as i,l as P,v as C,p as k,f as w}from"./index-BYQ_fF55.js";const $={props:["finalTotal"],data(){return{api_path:"wei123",url:"https://vue3-course-api.hexschool.io",selectValue:"",cartProducts:[],cartList:{},final_total:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{NavBar:v,PageFooter:y},methods:{getCartProducts(){this.$http.get(`${this.url}/v2/api/${this.api_path}/cart`).then(s=>{this.cartProducts=s.data.data.carts,this.cartList=s.data.data}).catch(s=>{console.log(s.response.data.message)})},reviseQty(s,o){this.$http.post(`${this.url}/v2/api/${this.api_path}/cart`,{data:{product_id:s,qty:o}}).then(()=>{alert("修改購物車成功"),this.getCartProducts()}).catch(u=>{console.log(u.response.data.message)})},delCartItem(s){this.$http.delete(`${this.url}/v2/api/${this.api_path}/cart/${s}`).then(()=>{alert("已經刪除"),this.getCartProducts()}).cath(o=>{console.log(o.message)})},enterPayment(){this.$router.push("/userOrder"),window.scrollTo(0,0),this.$emit("emit-cart-list",this.cartList)}},mounted(){this.getCartProducts()}},a=s=>(k("data-v-39107f2f"),s=s(),w(),s),B={class:"container"},I={class:"container-fluid",style:{"min-height":"100vh"}},N={class:"container py-48"},F=a(()=>t("h2",{class:"text-center py-60 fs-24 fs-lg-32"},"購物車列表",-1)),L={class:"container-sm"},V={class:"table table-responsive"},S=a(()=>t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"fs-md-24"},"品名"),t("th",{scope:"col",class:"fs-md-24"},"圖片"),t("th",{scope:"col",class:"fs-md-24"},"數量"),t("th",{scope:"col",class:"fs-md-24"},"價格")])],-1)),U={class:"fs-md-24 align-middle"},j={class:"align-middle"},q=["src"],M={class:"align-middle"},Q=["onClick"],T=["onClick"],D=a(()=>t("i",{class:"bi bi-trash text-center"},null,-1)),E=[D],O=["onUpdate:modelValue"],z=["onClick"],A={class:"fs-md-24 align-middle"},G=a(()=>t("td",null,null,-1)),H=a(()=>t("td",null,null,-1)),J=a(()=>t("td",null,null,-1)),K={class:"fs-md-16 fs-lg-24 pt-32"},R={class:"container d-lg-flex justify-content-between"},W={class:"container d-flex px-0 justify-content-end"},X={class:"container-fluid px-0"},Y={class:"container"};function Z(s,o,u,tt,d,n){const m=_("NavBar"),f=_("PageFooter"),g=_("router-view");return i(),l(p,null,[t("div",B,[r(m,{cartProducts:d.cartProducts},null,8,["cartProducts"])]),t("div",I,[t("div",N,[F,t("div",L,[t("table",V,[S,t("tbody",null,[(i(!0),l(p,null,x(d.cartProducts,e=>(i(),l("tr",{key:e.id},[t("td",U,h(e.product.title),1),t("td",j,[t("img",{src:e.product.imageUrl,alt:"產品圖片",style:{height:"100px",width:"100px"}},null,8,q)]),t("td",M,[e.qty>=2?(i(),l("button",{key:0,class:"btn d-flex d-md-inline",onClick:c=>n.reviseQty(e.product.id,-1)}," - ",8,Q)):(i(),l("button",{key:1,class:"rounded btn d-flex d-md-inline",style:{width:"35px",height:"38px"},onClick:c=>n.delCartItem(e.id)},E,8,T)),P(t("input",{type:"number",class:"border border-gray border-1 rounded me-4 d-flex d-md-inline",style:{width:"100px",height:"36px"},"onUpdate:modelValue":c=>e.qty=c},null,8,O),[[C,e.qty]]),t("button",{class:"btn d-flex d-md-inline",onClick:c=>n.reviseQty(e.product.id,1)}," + ",8,z)]),t("td",A,h(Math.floor(e.final_total)),1)]))),128))]),t("tfoot",null,[G,H,J,t("td",K,[t("div",R,[t("p",null,"總價: $"+h(Math.floor(d.cartList.final_total)),1)])])])]),t("div",W,[t("button",{type:"button",class:"btn w-50 mb-60 btn-footer",onClick:o[0]||(o[0]=(...e)=>n.enterPayment&&n.enterPayment(...e))}," 進入付款頁面 ")])])])]),t("div",X,[r(f)]),t("div",Y,[r(g)])],64)}const at=b($,[["render",Z],["__scopeId","data-v-39107f2f"]]);export{at as default};

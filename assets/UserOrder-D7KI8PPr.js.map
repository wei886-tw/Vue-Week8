{"version":3,"file":"UserOrder-D7KI8PPr.js","sources":["../../src/views/UserOrder.vue"],"sourcesContent":["<template>\n  <div class=\"container-fluid px-0\">\n    <NavBar />\n  </div>\n  <div class=\"container-fluid px-0 pt-16\">\n    <div class=\"container\">\n      <div class=\"row\">\n        <div class=\"col-md-6 col-lg-8 mx-auto\">\n          <ol\n            class=\"pay-list mt-16 d-flex justify-content-between list-unstyled position-relative\"\n          >\n            <li class=\"d-flex flex-column align-items-center\">\n              <p\n                class=\"number d-flex justify-content-center align-items-center number-active mb-8\"\n              >\n                1\n              </p>\n              <p class=\"fw-bold mb-0\">訂單確認</p>\n            </li>\n            <li class=\"d-flex flex-column align-items-center\">\n              <p\n                class=\"number d-flex justify-content-center align-items-center mb-8\"\n              >\n                2\n              </p>\n              <p class=\"fw-bold mb-0\">結帳付款</p>\n            </li>\n            <li class=\"d-flex flex-column align-items-center\">\n              <p\n                class=\"number d-flex justify-content-center align-items-center mb-8\"\n              >\n                3\n              </p>\n              <p class=\"fw-bold\">訂單結果</p>\n            </li>\n          </ol>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"container\">\n      <div class=\"row justify-content-center\">\n        <div class=\"col-md-6\">\n          <v-form v-slot=\"{ errors }\" ref=\"form\" id=\"form\">\n            <div class=\"mb-12\">\n              <label for=\"email\" class=\"form-label\"></label>\n              <v-field\n                id=\"email\"\n                name=\"email\"\n                type=\"email\"\n                class=\"form-control\"\n                :class=\"{ 'is-invalid': errors['email'] }\"\n                placeholder=\"請輸入 Email\"\n                rules=\"email|required\"\n                v-model=\"form.user.email\"\n              ></v-field>\n              <error-message\n                name=\"email\"\n                class=\"invalid-feedback\"\n              ></error-message>\n            </div>\n\n            <div class=\"mb-12\">\n              <label for=\"inputName\" class=\"form-label\"></label>\n              <v-field\n                type=\"text\"\n                class=\"form-control\"\n                id=\"inputName\"\n                name=\"姓名\"\n                :class=\"{ 'is-invalid': errors['姓名'] }\"\n                placeholder=\"請輸入姓名\"\n                rules=\"required\"\n                v-model=\"form.user.name\"\n              >\n              </v-field>\n              <error-message\n                name=\"姓名\"\n                class=\"invalid-feedback\"\n              ></error-message>\n            </div>\n\n            <div class=\"mb-12\">\n              <label for=\"inputTelephone\" class=\"form-label\"></label>\n              <v-field\n                type=\"tel\"\n                class=\"form-control\"\n                id=\"inputTelephone\"\n                name=\"電話\"\n                :class=\"{ 'is-invalid': errors['電話'] }\"\n                placeholder=\"請輸入電話\"\n                :rules=\"isPhone\"\n                v-model=\"form.user.tel\"\n              ></v-field>\n              <error-message\n                name=\"電話\"\n                class=\"invalid-feedback\"\n              ></error-message>\n            </div>\n\n            <div class=\"mb-12\">\n              <label for=\"inputAddress\" class=\"form-label\"></label>\n              <v-field\n                type=\"text\"\n                class=\"form-control\"\n                id=\"inputAddress\"\n                name=\"地址\"\n                :class=\"{ 'is-invalid': errors['地址'] }\"\n                placeholder=\"請輸入地址\"\n                rules=\"required\"\n                v-model=\"form.user.address\"\n              >\n              </v-field>\n              <error-message\n                name=\"地址\"\n                class=\"invalid-feedback\"\n              ></error-message>\n            </div>\n\n            <div class=\"mb-24 d-flex flex-column\">\n              <label for=\"message\" class=\"form-label\"></label>\n              <v-field\n                name=\"message\"\n                id=\"message\"\n                cols=\"30\"\n                style=\"height: fit-content\"\n                class=\"form-control border border-1 rounded\"\n                v-model=\"form.message\"\n                as=\"textarea\"\n                placeholder=\"請輸入留言\"\n              ></v-field>\n            </div>\n\n            <div class=\"d-flex justify-content-center\">\n              <button\n                type=\"button\"\n                class=\"btn btn-footer hover w-100 mb-60\"\n                @click=\"submitOrder\"\n              >\n                送出訂單\n              </button>\n            </div>\n          </v-form>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class=\"container-fluid px-0\">\n    <page-footer></page-footer>\n  </div>\n</template>\n\n\n<script>\nimport NavBar from \"@/components/NavBar.vue\";\nimport PageFooter from \"@/components/PageFooter.vue\";\n\nexport default {\n  components: { NavBar, PageFooter },\n  data() {\n    return {\n      api_path: import.meta.env.VITE_PATH,\n      url: import.meta.env.VITE_API,\n      cartProducts: [],\n      cartList: {},\n      form: {\n        user: {\n          name: \"\",\n          email: \"\",\n          tel: \"\",\n          address: \"\",\n        },\n        message: \"\",\n      },\n      total: \"\",\n      create_at: \"\",\n      orderId: \"\",\n      data: \"\",\n    };\n  },\n\n  methods: {\n    isPhone(value) {\n      const phoneNumber = /^(09)[0-9]{8}$/;\n      return phoneNumber.test(value) ? true : \"需要正確的電話號碼\";\n    },\n\n    getCartProducts() {\n      this.$http\n        .get(`${this.url}/v2/api/${this.api_path}/cart`)\n        .then((res) => {\n          this.cartProducts = res.data.data.carts;\n          this.cartList = res.data.data;\n        })\n        .catch((err) => {\n          console.log(err.response.data.message);\n        });\n    },\n\n    submitOrder() {\n      if (this.cartList.carts.length === 0) {\n        alert(\"目前購物車是空的，請加入產品！\");\n      } else {\n        this.$http\n          .post(`${this.url}/v2/api/${this.api_path}/order`, {\n            data: {\n              user: {\n                name: this.form.user.name,\n                email: this.form.user.email,\n                tel: this.form.user.tel,\n                address: this.form.user.address,\n              },\n              message: this.form.message,\n            },\n          })\n\n          .then((res) => {\n            this.orderId = res.data.orderId;\n            alert(\"成功送出訂單\");\n            this.$router.push(`/userPayment/${this.orderId}`);\n            this.$refs.form.reset();\n            this.orderId = res.data.orderId;\n            this.total = res.data.total;\n          })\n          .catch((err) => {\n            console.log(err.response.data.message);\n          });\n      }\n    },\n  },\n\n  mounted() {\n    this.getCartProducts();\n    window.scrollTo(0, 0);\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.number {\n  border: 1px solid #000;\n  border-radius: 50%;\n  width: 32px;\n  height: 32px;\n  background-color: white;\n  z-index: 1;\n  font-weight: bold;\n}\n@media (min-width: 768px) {\n  .number {\n    width: 48px;\n    height: 48px;\n    font-size: 24px;\n  }\n}\n.number-active {\n  background-color: black;\n  color: white;\n}\n\n.pay-list::before {\n  content: \"\";\n  width: 90%;\n  height: 1px;\n  background-color: black;\n  transform: translate(-50%, -50%);\n  left: 50%;\n  top: 30%;\n  position: absolute;\n  z-index: 1;\n}\n\n.btn.hover:hover{\n  background-color: black;\n  color:white;\n}\n</style>"],"names":["_sfc_main","NavBar","PageFooter","value","res","err","_hoisted_1","_hoisted_2","_hoisted_3","_createStaticVNode","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_9","_hoisted_11","_hoisted_13","_hoisted_15","_hoisted_17","_hoisted_18","_openBlock","_createElementBlock","_Fragment","_createElementVNode","_createVNode","_component_NavBar","_component_v_form","_withCtx","errors","_hoisted_8","_component_v_field","_normalizeClass","$data","_cache","$event","_component_error_message","_hoisted_10","_hoisted_12","$options","_hoisted_14","_hoisted_16","args","_component_page_footer"],"mappings":"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"}
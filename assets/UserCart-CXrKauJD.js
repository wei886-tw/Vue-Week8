import{N as v,P as y}from"./NavBar-DKaxoBTL.js";import{_ as b,l as o,j as t,i as h,F as _,v as p,y as d,z as C,x as P,e as l,q as k,s as x,k as u}from"./index-DmKDfaJQ.js";const $={props:["finalTotal"],data(){return{api_path:"wei123",url:"https://vue3-course-api.hexschool.io",selectValue:"",cartProducts:[],cartList:{},final_total:"",form:{user:{name:"",email:"",tel:"",address:""},message:"",qty:0}}},components:{NavBar:v,PageFooter:y},methods:{getCartProducts(){this.$http.get(`${this.url}/v2/api/${this.api_path}/cart`).then(e=>{this.cartProducts=e.data.data.carts,this.cartList=e.data.data}).catch(e=>{console.log(e.response.data.message)})},reviseQty(e){this.qty=parseInt(event.target.value),this.$http.put(`${this.url}/v2/api/${this.api_path}/cart/${e}`,{data:{product_id:e,qty:this.qty}}).then(()=>{alert("修改購物車成功"),this.getCartProducts()}).catch(a=>{console.log(a.response.data.message)})},delCartItem(e){this.$http.delete(`${this.url}/v2/api/${this.api_path}/cart/${e}`).then(()=>{alert("已經刪除"),this.getCartProducts()}).cath(a=>{console.log(a.message)})},enterPayment(){this.$router.push("/userOrder"),window.scrollTo(0,0),this.$emit("emit-cart-list",this.cartList)},backToShop(){this.$router.push("/userProduct")},loadingCircle(){let e=this.$loading.show({container:this.fullPage?null:this.$refs.formContainer,canCancel:!0,onCancel:this.onCancel});setTimeout(()=>{e.hide()},500)}},mounted(){this.getCartProducts(),this.loadingCircle()}},r=e=>(k("data-v-f6feef04"),e=e(),x(),e),w={class:"container-fluid px-0"},I={class:"container-fluid px-0",style:{"min-height":"100vh"}},N={class:"container"},q=r(()=>t("h2",{class:"text-center py-60 pb-16 fs-24 fs-lg-32"},"購物車列表",-1)),S={class:"container px-0"},T={key:0,class:"table table-responsive"},B=r(()=>t("thead",null,[t("tr",null,[t("th",{class:"fs-md-24"},"刪除"),t("th",{class:"fs-md-24",style:{width:"40%"}},"品名"),t("th",{class:"fs-md-24"},"圖片"),t("th",{class:"fs-md-24"},"數量"),t("th",{class:"fs-md-24"},"價格")])],-1)),F={class:"align-middle"},L=["onClick"],V={class:"fs-12 fs-sm-16 fs-md-24 align-middle"},j={class:"align-middle"},M=["src"],Q={class:"align-middle"},U=["onChange"],z=["value","selected"],D={class:"fs-12 fs-sm-16 fs-md-24 align-middle"},E=r(()=>t("td",null,null,-1)),O=r(()=>t("td",null,null,-1)),A=r(()=>t("td",null,null,-1)),G={class:"fs-md-16 fs-lg-24 pt-32"},H={class:"container d-lg-flex justify-content-between"},J={key:1,class:"text-center fs-24"},K=r(()=>t("br",null,null,-1)),R={class:"container d-flex px-0 justify-content-end"},W={class:"container-fluid px-0"},X={class:"container-fluid"};function Y(e,a,Z,tt,c,n){const m=u("NavBar"),f=u("PageFooter"),g=u("router-view");return l(),o(_,null,[t("div",w,[h(m)]),t("div",I,[t("div",N,[q,t("div",S,[c.cartProducts.length!==0?(l(),o("table",T,[B,t("tbody",null,[(l(!0),o(_,null,p(c.cartProducts,s=>(l(),o("tr",{key:s.id},[t("td",F,[t("i",{class:"bi bi-trash3-fill fs-md-24",onClick:i=>n.delCartItem(s.id)},null,8,L)]),t("td",V,d(s.product.title),1),t("td",j,[t("img",{src:s.product.imageUrl,alt:"產品圖片",class:"rwd"},null,8,M)]),t("td",Q,[t("select",{name:"",id:"",onChange:i=>n.reviseQty(s.id),class:"border border-2 border-dark rounded",style:{height:"40px",width:"50%"}},[(l(),o(_,null,p(10,i=>t("option",{value:i,key:i,selected:i===s.qty},d(i),9,z)),64))],40,U)]),t("td",D,d(Math.floor(parseInt(s.product.price*s.qty))),1)]))),128))]),t("tfoot",null,[E,O,A,t("td",G,[t("div",H,[t("p",null,"總價: $"+d(Math.floor(c.cartList.final_total)),1)])])])])):(l(),o("h2",J,[C(" 您的購物車沒有東西喔，請先加入商品！"),K,t("button",{class:"btn btn-gray mt-32",onClick:a[0]||(a[0]=(...s)=>n.backToShop&&n.backToShop(...s))}," 返回商品頁面 ")])),t("div",R,[c.cartProducts.length!==0?(l(),o("button",{key:0,type:"button",class:"btn w-50 mb-60 btn-footer",onClick:a[1]||(a[1]=(...s)=>n.enterPayment&&n.enterPayment(...s))}," 進入付款頁面 ")):P("",!0)])])])]),t("div",W,[h(f)]),t("div",X,[h(g)])],64)}const at=b($,[["render",Y],["__scopeId","data-v-f6feef04"]]);export{at as default};

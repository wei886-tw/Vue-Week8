import{A as w}from"./AdminNavBar-Tz9jQ5zE.js";import{P as v}from"./PageNation-BViz5DCC.js";import{m as x}from"./mixin-CE07gU2g.js";import{_ as O,l as i,j as e,i as _,F as h,x as p,z as o,G as n,H as r,A as m,k as b,e as d}from"./index-BNNAF0AP.js";const y={components:{AdminNavBar:w,PageNation:v},mixins:[x],data(){return{api:"https://vue3-course-api.hexschool.io",api_path:"wei123",orders:[],ordersPagination:{},tempOrder:{user:""},orderModal:""}},methods:{getOrders(l=1){this.$http.get(`${this.api}/v2/api/${this.api_path}/admin/orders?page=${l}`).then(a=>{this.orders=a.data.orders,this.ordersPagination=a.data.pagination}).catch(a=>{alert(a.response.data.message)})},deleteOrder(l){this.$http.delete(`${this.api}/v2/api/${this.api_path}/admin/order/${l}`).then(()=>{alert("訂單已刪除！"),this.getOrders(1)}).catch(a=>{console.log(a.response.data.message)})},openModal(l){this.tempOrder={...l},console.log(this.tempOrder.user),this.orderModal.show()}},mounted(){this.getOrders(1),this.orderModal=new bootstrap.Modal(this.$refs.orderModal),this.loadingCircle()}},k={class:"container-fluid px-0"},M={class:"container-fluid px-0"},D={class:"container py-32"},C=e("h2",{class:"text-start mb-16 fs-32 fw-bold"},"訂單列表",-1),V={class:"table"},N=e("thead",null,[e("tr",null,[e("th",{scope:"col",style:{width:"10%"}},"下單時間"),e("th",{scope:"col",style:{width:"15%"}},"訂單編號"),e("th",{scope:"col",style:{width:"10%"}},"價格"),e("th",{scope:"col",style:{width:"10%"}},"是否付款"),e("th",{scope:"col",style:{width:"15%"}},"訂單內容"),e("th",{scope:"col",style:{width:"15%"}},"刪除訂單")])],-1),P={class:"align-center"},A={class:"align-center"},B={class:"align-center"},F={class:"align-center"},U=["onClick"],L=["onClick"],j={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"orderModal"},E={class:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable"},T={class:"modal-content"},Y={class:"modal-header bg-dark"},q={class:"modal-title fs-24 text-white ps-32",id:"exampleModalLabel"},z=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),G={class:"modal-body"},H={class:"row"},S={class:"col-4"},I={class:"container d-flex mb-16"},J=e("p",{for:"",class:"mb-8 fs-24 fw-bold ps-32"},"訂單用戶：",-1),K={class:"fs-20 fw-bold"},Q={class:"form-check form-switch mb-16"},R=e("label",{for:"",class:"mb-8"},"Email：",-1),W={class:"form-check form-switch mb-16"},X=e("label",{for:"",class:"mb-8"},"電話：",-1),Z={class:"form-check form-switch mb-16"},$=e("label",{for:"",class:"mb-8"},"住址：",-1),ee={class:"form-check form-switch mb-16"},te=e("label",{for:"",class:"mb-8"},"留言：",-1),se={class:"col-8"},oe={class:"form-check form-switch mb-16"},ae=e("p",{class:"fs-24 fw-bold mb-8"},"訂單狀態：",-1),le=e("label",{for:"",class:"mb-8"}," 訂單建立時間： ",-1),ie={class:"form-check form-switch mb-16"},de=e("label",{for:"",class:"mb-8"},"訂單付費狀態：",-1),ne={class:"form-check form-switch mb-16"},re=e("label",{for:"",class:"mb-8"},"訂單數量：",-1),ce={class:"form-check form-switch mb-16"},me=e("h3",{class:"fs-24 fw-bold"},"訂購產品：",-1),_e={class:"me-8"},he={class:"me-8"},pe=e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal"}," 關閉 ")],-1),be={class:"container d-flex justify-content-end"};function ue(l,a,fe,ge,s,c){const u=b("admin-nav-bar"),f=b("page-nation");return d(),i("div",k,[e("div",M,[_(u)]),e("div",D,[C,e("table",V,[N,e("tbody",null,[(d(!0),i(h,null,p(s.orders,t=>(d(),i("tr",{key:t.id,class:"align-center"},[e("td",P,o(new Date(t.create_at*1e3).getFullYear())+"/"+o(new Date(t.create_at*1e3).getMonth())+"/"+o(new Date(t.create_at*1e3).getDate()),1),e("td",A,o(t.id),1),e("td",B,o(t.total),1),e("td",F,o(t.is_paid?"已付款":"未付款"),1),e("td",null,[e("button",{class:"btn btn-success",onClick:g=>c.openModal(t)}," 訂單內容 ",8,U)]),e("td",null,[e("button",{class:"btn btn-danger",onClick:g=>c.deleteOrder(t.id)}," 刪除訂單 ",8,L)])]))),128))])]),e("div",j,[e("div",E,[e("div",T,[e("div",Y,[e("h5",q," 訂單編號："+o(s.tempOrder.id),1),z]),e("div",G,[e("div",H,[e("div",S,[e("div",I,[J,e("p",K,o(s.tempOrder.user.name),1)]),e("div",Q,[R,n(e("input",{type:"text",name:"",id:"","onUpdate:modelValue":a[0]||(a[0]=t=>s.tempOrder.user.email=t),class:"form-control w-100"},null,512),[[r,s.tempOrder.user.email]])]),e("div",W,[X,n(e("input",{type:"text",name:"",id:"","onUpdate:modelValue":a[1]||(a[1]=t=>s.tempOrder.user.tel=t),class:"form-control w-100"},null,512),[[r,s.tempOrder.user.tel]])]),e("div",Z,[$,n(e("input",{type:"text",name:"",id:"","onUpdate:modelValue":a[2]||(a[2]=t=>s.tempOrder.user.address=t),class:"form-control w-100"},null,512),[[r,s.tempOrder.user.address]])]),e("div",ee,[te,n(e("textarea",{type:"text",name:"",id:"","onUpdate:modelValue":a[3]||(a[3]=t=>s.tempOrder.message=t),class:"form-control w-100"},null,512),[[r,s.tempOrder.message]])])]),e("div",se,[e("div",oe,[ae,le,m(" "+o(new Date(s.tempOrder.create_at*1e3).getFullYear())+" / "+o(new Date(s.tempOrder.create_at*1e3).getMonth())+" / "+o(new Date(s.tempOrder.create_at*1e3).getDate()),1)]),e("div",ie,[de,m(" "+o(s.tempOrder.is_paid?"已付費":"尚未付費"),1)]),e("div",ne,[re,m(" "+o(s.tempOrder.num),1)]),e("div",ce,[me,(d(!0),i(h,null,p(s.tempOrder.products,t=>(d(),i("div",{class:"container d-flex px-0",key:t.id},[e("p",_e,o(t.product.title)+"：",1),e("p",he,o(t.qty)+" "+o(t.product.unit)+"， ",1),e("p",null,"價格："+o(t.product.price),1)]))),128))])])])]),pe])])],512),e("div",be,[_(f,{pagination:s.ordersPagination,"get-page-products":c.getOrders},null,8,["pagination","get-page-products"])])])])}const ye=O(y,[["render",ue]]);export{ye as default};

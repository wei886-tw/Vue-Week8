import{A as m}from"./AdminNavBar-ZMhXckbH.js";import{P as b}from"./PageNation-CvaMUUX7.js";import{_ as f,c as n,b as o,a as t,i as $,F as h,d as k,r as i,o as c,e as v,f as l}from"./index-BmGdtGRh.js";const A={components:{AdminNavBar:m,PageNation:b},data(){return{url:"https://vue3-course-api.hexschool.io",api_path:"wei123",blogPagination:{},title:"",content:"",author:"",articleCategory:"",tag:[],description:"",isPublic:!0,create_at:"",articles:""}},methods:{checkAdmin(){const a=`${this.url}/api/user/check`;this.$http.post(a).then(()=>{this.getPageArticle(1)}).catch(e=>{alert(e.response.data.message),this.$router.push("/adminLogin")})},getPageArticle(a){this.$http.get(`${this.url}/v2/api/${this.api_path}/admin/articles?page=${a}`).then(e=>{this.articles=e.data.articles,this.blogPagination=e.data.pagination,this.title=e.data.articles.title,this.create_at=e.data.articles.create_at,this.description=e.data.articles.description,this.isPublic=e.data.articles.isPublic,this.tag=e.data.articles.tag,this.author=e.data.articles.author,this.content=e.data.articles.content,this.imageUrl=e.data.articles.imageUrl}).catch(e=>{console.log(e.response.data.message)})},deleteArticle(a){this.$http.delete(`${this.url}/v2/api/${this.api_path}/admin/article/${a}`).then(()=>{alert("刪除成功"),this.getPageArticle(1)}).catch(e=>{console.log(e.response.data.message)})}},mounted(){const a=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=a,this.checkAdmin()}},P={class:"container-fluid px-0"},x={class:"container py-48"},y={class:"container d-flex justify-content-between mb-24"},w=t("h2",{class:"fs-32"},"文章管理",-1),B={type:"button",class:"btn btn-dark"},C={class:"table mb-32"},N=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"標題文章"),t("th",{scope:"col"},"標題作者"),t("th",{scope:"col"},"是否公開"),t("th",{scope:"col"},"修改"),t("th",{scope:"col"},"刪除")])],-1),V=t("td",null,[t("button",{class:"btn btn-success"},"修改文章")],-1),j=["onClick"],F={class:"container"},L={class:"container"};function T(a,e,U,z,r,d){const p=i("admin-nav-bar"),u=i("router-link"),_=i("page-nation"),g=i("router-view");return c(),n(h,null,[o(p),t("div",P,[t("div",x,[t("div",y,[w,t("button",B,[o(u,{to:"/newArticle",class:"text-white"},{default:$(()=>[v("建立新文章")]),_:1})])]),t("table",C,[N,t("tbody",null,[(c(!0),n(h,null,k(r.articles,s=>(c(),n("tr",{key:s+123},[t("td",null,l(s.title),1),t("td",null,l(s.author),1),t("td",null,l(s.isPublic?"是":"否"),1),V,t("td",null,[t("button",{class:"btn btn-danger",onClick:D=>d.deleteArticle(s.id)}," 刪除文章 ",8,j)])]))),128))])]),t("div",F,[o(_,{pagination:r.blogPagination,"get-page-products":d.getPageArticle,class:"d-flex justify-content-end"},null,8,["pagination","get-page-products"])])])]),t("div",L,[o(g)])],64)}const G=f(A,[["render",T]]);export{G as default};

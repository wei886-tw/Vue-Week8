import{A as g}from"./AdminNavBar-BuemjYHW.js";import{P as u}from"./PageNation-BjhucjOB.js";import{_ as m,c as o,b as r,a as t,F as b,g as f,r as h,o as i,t as s,j as c}from"./index-C3_p6ebD.js";const $={components:{AdminNavBar:g,PageNation:u},data(){return{api:"https://vue3-course-api.hexschool.io",api_path:"wei123",orders:[],ordersPagination:{}}},methods:{getOrders(n=1){this.$http.get(`${this.api}/v2/api/${this.api_path}/admin/orders?page=${n}`).then(a=>{this.orders=a.data.orders,this.ordersPagination=a.data.pagination,console.log(this.orders)}).catch(a=>{alert(a.response.data.message)})},deleteOrder(n){this.$http.delete(`${this.api}/v2/api/${this.api_path}/admin/order/${n}`).then(()=>{alert("訂單已刪除！"),this.getOrders(1)}).catch(a=>{console.log(a.response.data.message)})}},mounted(){this.getOrders(1);const n=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=n}},y={class:"container-fluid px-0"},v={class:"container py-32"},x=t("h2",{class:"text-center mb-16 fs-32"},"訂單列表",-1),w={class:"table"},k=t("thead",null,[t("tr",null,[t("th",{scope:"col",style:{width:"10%"}},"刪除"),t("th",{scope:"col",style:{width:"10%"}},"下單時間"),t("th",{scope:"col",style:{width:"15%"}},"訂單編號"),t("th",{scope:"col",style:{width:"10%"}},"價格"),t("th",{scope:"col",style:{width:"20%"}},"是否付款"),t("th",{scope:"col",style:{width:"20%"}},"買家資訊"),t("th",{scope:"col",style:{width:"10%"}},"留言")])],-1),O={class:"btn btn-danger"},N=["onClick"],P={class:"align-center"},A={class:"align-center"},B={class:"align-center"},C={class:"align-center"},D={class:"align-center"},V=t("br",null,null,-1),j=t("br",null,null,-1),F={class:"container d-flex justify-content-end"};function L(n,a,S,T,l,d){const p=h("admin-nav-bar"),_=h("page-nation");return i(),o("div",y,[r(p),t("div",v,[x,t("table",w,[k,t("tbody",null,[(i(!0),o(b,null,f(l.orders,e=>(i(),o("tr",{key:e.id,class:"align-center"},[t("td",null,[t("button",O,[t("i",{class:"bi bi-x-lg",onClick:z=>d.deleteOrder(e.id)},null,8,N)])]),t("td",P,s(new Date(e.create_at).toLocaleDateString()),1),t("td",A,s(e.id),1),t("td",B,s(e.total),1),t("td",C,s(e.is_paid?"已付款":"未付款"),1),t("td",D,[c(" email: "+s(e.user.email)+" ",1),V,c(" 地址： "+s(e.user.address)+" ",1),j,c(" 姓名: "+s(e.user.name),1)]),t("td",null,s(e.message),1)]))),128))])]),t("div",F,[r(_,{pagination:l.ordersPagination,"get-page-products":d.getOrders},null,8,["pagination","get-page-products"])])])])}const H=m($,[["render",L]]);export{H as default};

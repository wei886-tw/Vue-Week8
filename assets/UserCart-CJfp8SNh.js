import{N as b,P as v}from"./NavBar-CH2jMvLM.js";import{_ as y,l as a,j as t,i as r,F as m,v as C,y as h,z as x,x as k,e as l,B as P,C as w,q as $,s as N,k as _}from"./index-D-hwiczx.js";const T={props:["finalTotal"],data(){return{api_path:"wei123",url:"https://vue3-course-api.hexschool.io",selectValue:"",cartProducts:[],cartList:{},final_total:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{NavBar:b,PageFooter:v},methods:{getCartProducts(){this.$http.get(`${this.url}/v2/api/${this.api_path}/cart`).then(e=>{this.cartProducts=e.data.data.carts,this.cartList=e.data.data}).catch(e=>{console.log(e.response.data.message)})},reviseQty(e,o){this.$http.post(`${this.url}/v2/api/${this.api_path}/cart`,{data:{product_id:e,qty:o}}).then(()=>{alert("修改購物車成功"),this.getCartProducts()}).catch(u=>{console.log(u.response.data.message)})},delCartItem(e){this.$http.delete(`${this.url}/v2/api/${this.api_path}/cart/${e}`).then(()=>{alert("已經刪除"),this.getCartProducts()}).cath(o=>{console.log(o.message)})},enterPayment(){this.$router.push("/userOrder"),window.scrollTo(0,0),this.$emit("emit-cart-list",this.cartList)},backToShop(){this.$router.push("/userProduct")},loadingCircle(){let e=this.$loading.show({container:this.fullPage?null:this.$refs.formContainer,canCancel:!0,onCancel:this.onCancel});setTimeout(()=>{e.hide()},500)}},mounted(){this.getCartProducts(),this.loadingCircle()}},i=e=>($("data-v-a94f2392"),e=e(),N(),e),B={class:"container-fluid px-0"},I={class:"container-fluid px-0",style:{"min-height":"100vh"}},S={class:"container"},V=i(()=>t("h2",{class:"text-center py-60 pb-16 fs-24 fs-lg-32"},"購物車列表",-1)),F={class:"container px-0"},L={key:0,class:"table table-responsive"},q=i(()=>t("thead",null,[t("tr",null,[t("th",{class:"fs-md-24"},"刪除"),t("th",{class:"fs-md-24",style:{width:"40%"}},"品名"),t("th",{class:"fs-md-24"},"圖片"),t("th",{class:"fs-md-24"},"數量"),t("th",{class:"fs-md-24"},"價格")])],-1)),U={class:"align-middle"},j=["onClick"],M={class:"fs-12 fs-sm-16 fs-md-24 align-middle"},Q={class:"align-middle"},D=["src"],z={class:"align-middle"},E=["onClick"],O=["onClick"],A=i(()=>t("i",{class:"bi bi-trash text-center"},null,-1)),G=[A],H=["onUpdate:modelValue"],J=["onClick"],K={class:"fs-12 fs-sm-16 fs-md-24 align-middle"},R=i(()=>t("td",null,null,-1)),W=i(()=>t("td",null,null,-1)),X=i(()=>t("td",null,null,-1)),Y={class:"fs-md-16 fs-lg-24 pt-32"},Z={class:"container d-lg-flex justify-content-between"},tt={key:1,class:"text-center fs-24"},et=i(()=>t("br",null,null,-1)),st={class:"container d-flex px-0 justify-content-end"},ot={class:"container-fluid px-0"},nt={class:"container-fluid"};function at(e,o,u,lt,d,n){const p=_("NavBar"),f=_("PageFooter"),g=_("router-view");return l(),a(m,null,[t("div",B,[r(p)]),t("div",I,[t("div",S,[V,t("div",F,[d.cartProducts.length!==0?(l(),a("table",L,[q,t("tbody",null,[(l(!0),a(m,null,C(d.cartProducts,s=>(l(),a("tr",{key:s.id},[t("td",U,[t("button",{class:"btn btn-danger",onClick:c=>n.delCartItem(s.id)},"刪除",8,j)]),t("td",M,h(s.product.title),1),t("td",Q,[t("img",{src:s.product.imageUrl,alt:"產品圖片",class:"rwd"},null,8,D)]),t("td",z,[s.qty>=2?(l(),a("button",{key:0,class:"btn d-flex d-md-inline",onClick:c=>n.reviseQty(s.product.id,-1)}," - ",8,E)):(l(),a("button",{key:1,class:"rounded btn d-flex d-md-inline",style:{width:"35px",height:"38px"},onClick:c=>n.delCartItem(s.id)},G,8,O)),P(t("input",{type:"number",class:"border border-gray border-1 rounded me-4 d-flex d-md-inline",style:{height:"36px"},"onUpdate:modelValue":c=>s.qty=c},null,8,H),[[w,s.qty]]),t("button",{class:"btn d-flex d-md-inline",onClick:c=>n.reviseQty(s.product.id,1)}," + ",8,J)]),t("td",K,h(Math.floor(s.final_total)),1)]))),128))]),t("tfoot",null,[R,W,X,t("td",Y,[t("div",Z,[t("p",null,"總價: $"+h(Math.floor(d.cartList.final_total)),1)])])])])):(l(),a("h2",tt,[x(" 您的購物車沒有東西喔，請先加入商品！"),et,t("button",{class:"btn btn-gray mt-32",onClick:o[0]||(o[0]=(...s)=>n.backToShop&&n.backToShop(...s))}," 返回商品頁面 ")])),t("div",st,[d.cartProducts.length!==0?(l(),a("button",{key:0,type:"button",class:"btn w-50 mb-60 btn-footer",onClick:o[1]||(o[1]=(...s)=>n.enterPayment&&n.enterPayment(...s))}," 進入付款頁面 ")):k("",!0)])])])]),t("div",ot,[r(f)]),t("div",nt,[r(g)])],64)}const dt=y(T,[["render",at],["__scopeId","data-v-a94f2392"]]);export{dt as default};

import{A as b}from"./AdminNavBar-ByHfnuSR.js";import{P as v}from"./PageNation-D_OyVY62.js";import{m as f}from"./mixin-CE07gU2g.js";import{_ as k,l as c,i as s,j as t,g as A,F as h,v as $,k as o,e as l,z as x,y as r}from"./index-C1fG4lgd.js";const P={components:{AdminNavBar:b,PageNation:v},mixins:[f],data(){return{url:"https://vue3-course-api.hexschool.io",api_path:"wei123",blogPagination:{},title:"",content:"",author:"",articleCategory:"",tag:[],description:"",isPublic:!0,create_at:"",articles:"",bsModal:"",id:""}},methods:{checkAdmin(){const a=`${this.url}/api/user/check`;this.$http.post(a).then(()=>{this.getPageArticle(1)}).catch(e=>{alert(e.response.data.message),this.$router.push("/adminLogin")})},getPageArticle(a){this.$http.get(`${this.url}/v2/api/${this.api_path}/admin/articles?page=${a}`).then(e=>{this.articles=e.data.articles,this.blogPagination=e.data.pagination,this.title=e.data.articles.title,this.create_at=e.data.articles.create_at,this.description=e.data.articles.description,this.isPublic=e.data.articles.isPublic,this.tag=e.data.articles.tag,this.author=e.data.articles.author,this.content=e.data.articles.content,this.imageUrl=e.data.articles.imageUrl}).catch(e=>{console.log(e.response.data.message)})},deleteArticle(a){this.$http.delete(`${this.url}/v2/api/${this.api_path}/admin/article/${a}`).then(()=>{alert("刪除成功"),this.getPageArticle(1)}).catch(e=>{console.log(e.response.data.message)})},goAdviseArticle(a){this.$router.push(`/adviseArticle/${a}`)}},mounted(){const a=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=a,this.loadingCircle(),this.checkAdmin()}},y={class:"container-fluid px-0"},w={class:"container py-48"},C={class:"container d-flex justify-content-between mb-24 px-0"},B=t("h2",{class:"fs-32 fw-bold"},"文章管理",-1),N={type:"button",class:"btn btn-dark"},j={class:"table mb-32"},V=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"標題文章"),t("th",{scope:"col"},"標題作者"),t("th",{scope:"col"},"是否公開"),t("th",{scope:"col"},"修改"),t("th",{scope:"col"},"刪除")])],-1),z=["onClick"],F=["onClick"],L={class:"container"},M={class:"container"};function T(a,e,U,D,d,n){const p=o("admin-nav-bar"),u=o("router-link"),_=o("page-nation"),g=o("router-view");return l(),c(h,null,[s(p),t("div",y,[t("div",w,[t("div",C,[B,t("button",N,[s(u,{to:"/newArticle",class:"text-white"},{default:A(()=>[x("建立新文章")]),_:1})])]),t("table",j,[V,t("tbody",null,[(l(!0),c(h,null,$(d.articles,i=>(l(),c("tr",{key:i.id},[t("td",null,r(i.title),1),t("td",null,r(i.author),1),t("td",null,r(i.isPublic?"是":"否"),1),t("td",null,[t("button",{type:"button",class:"btn btn-success",onClick:m=>n.goAdviseArticle(i.id)}," 修改文章 ",8,z)]),t("td",null,[t("button",{class:"btn btn-danger",onClick:m=>n.deleteArticle(i.id)}," 刪除文章 ",8,F)])]))),128))])]),t("div",L,[s(_,{pagination:d.blogPagination,"get-page-products":n.getPageArticle,class:"d-flex justify-content-end"},null,8,["pagination","get-page-products"])])])]),t("div",M,[s(g)])],64)}const H=k(P,[["render",T]]);export{H as default};
//# sourceMappingURL=AdminBlog-Dmp9yK0k.js.map

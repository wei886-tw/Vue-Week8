import{A as f}from"./AdminNavBar-BkbnBBjx.js";import{U as _}from"./UploadImageModal-XS8PJCkJ.js";import{_ as b,c as v,b as h,a as t,k as l,v as c,e as n,u as d,x,t as y,F as k,o as U,p as w,f as V,r as p}from"./index-BU7A72Lt.js";const A={props:["id"],components:{AdminNavBarVue:f,UploadImageModalVue:_},data(){return{myModal:null,tempArticleInfo:{imageUrl:""},imageUrl:"",title:"",content:"",author:"",tag:[],description:"",articleCategory:"",isPublic:!0,create_at:"",url:"https://vue3-course-api.hexschool.io",api_path:"wei123"}},methods:{getUrl(i){this.imageUrl=i},getArticle(i){this.$http.get(`${this.url}/v2/api/${this.api_path}/admin/article/${i}`).then(e=>{this.article=e.data.article,this.title=e.data.article.title,this.create_at=e.data.article.create_at,this.description=e.data.article.description,this.isPublic=e.data.article.isPublic,this.tag=e.data.article.tag,this.author=e.data.article.author,this.content=e.data.article.content,this.imageUrl=e.data.article.image}).catch(e=>{console.log(e.response.data.message)})},adviseArticle(i){this.$http.put(`${this.url}/v2/api/${this.api_path}/admin/article/${i}`,{data:{title:this.title,description:this.description,image:this.imageUrl,tag:this.tag,create_at:this.create_at,author:this.author,isPublic:this.isPublic,content:this.content}}).then(()=>{alert("修改文章成功"),this.$router.push("/adminBlog")}).catch(e=>{console.log(e.response.data.message)})},addTag(i){this.tag===void 0?this.tag=i:this.tag.search(i)===-1&&this.tag.length!==0&&(this.tag=this.tag.concat("、",i))}},mounted(){this.getArticle(this.id),this.getUrl()}},o=i=>(w("data-v-1e13c05c"),i=i(),V(),i),C={class:"container-fluid"},I={class:"container py-48",id:"id"},B=o(()=>t("h2",{class:"fs-40 mb-32 text-center"},"修改文章",-1)),M={ref:"form"},P={class:"row justify-content-center"},N={class:"col-10"},S=o(()=>t("label",{class:"fs-24 mb-8",for:"title"},[n("文章標題"),t("span",{class:"text-danger"},"*")],-1)),T={class:"row mb-32 justify-content-center"},j={class:"col-5"},D=o(()=>t("label",{class:"fs-24",for:"author"},[n(" 文章作者"),t("span",{class:"text-danger"},"*")],-1)),F={class:"col-5"},E=o(()=>t("label",{class:"fs-24",for:"articleCategory"},[n(" 文章分類"),t("span",{class:"text-danger"},"*")],-1)),q={class:"col-10"},z=o(()=>t("label",{class:"fs-24",for:"description"},[n("文章簡述"),t("span",{class:"text-danger"},"*")],-1)),G=o(()=>t("label",{class:"fs-24",for:"description"},[n("文章內容"),t("span",{class:"text-danger"},"*")],-1)),H={class:"row justify-content-center"},J={class:"col-5 d-flex flex-column justify-content-between align-items-start"},K=o(()=>t("h3",{class:"fs-24"},"文章發佈狀態",-1)),L={class:"form-check form-switch"},O={class:"form-check-label",for:"flexSwitchCheckDefault"},Q={class:"col-5"},R=o(()=>t("p",{class:"fs-24"},"圖片預覽",-1)),W=["src"];function X(i,e,u,Y,a,r){const m=p("AdminNavBarVue"),g=p("UploadImageModalVue");return U(),v(k,null,[h(m),t("div",C,[t("div",I,[B,t("form",M,[t("div",P,[t("div",N,[S,l(t("input",{type:"text",class:"rounded mb-32 form-check-input",style:{width:"100%",height:"40px"},"onUpdate:modelValue":e[0]||(e[0]=s=>a.title=s),name:"title",id:"title"},null,512),[[c,a.title]])])]),t("div",T,[t("div",j,[D,l(t("input",{type:"text",class:"rounded mb-32 form-check-input",style:{width:"100%",height:"40px"},placeholder:"請填入作者",name:"author",id:"author","onUpdate:modelValue":e[1]||(e[1]=s=>a.author=s)},null,512),[[c,a.author]])]),t("div",F,[E,l(t("input",{type:"text",class:"rounded mb-16 form-check-input",style:{width:"100%",height:"40px"},placeholder:"請填入文章分類",name:"articleCategory",id:"articleCategory","onUpdate:modelValue":e[2]||(e[2]=s=>a.tag=s)},null,512),[[c,a.tag]]),t("p",null,[n(" 點擊帶入文章分類： "),t("button",{class:"btn btn-gray me-8",onClick:e[3]||(e[3]=d(s=>r.addTag("最新消息"),["prevent"]))}," 最新消息 "),t("button",{class:"btn btn-gray me-8",onClick:e[4]||(e[4]=d(s=>r.addTag("活動消息"),["prevent"]))}," 活動消息 "),t("button",{class:"btn btn-gray me-8",onClick:e[5]||(e[5]=d(s=>r.addTag("本站獨家"),["prevent"]))}," 本站獨家 ")])]),t("div",q,[z,l(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=s=>a.description=s),class:"rounded mb-24 form-check-input",style:{width:"100%",height:"120px"},placeholder:"請填入 100 字內描述",name:"description",id:"description"},null,512),[[c,a.description]]),G,l(t("textarea",{type:"text","onUpdate:modelValue":e[7]||(e[7]=s=>a.content=s),class:"rounded mb-24 form-check-input",style:{width:"100%",height:"240px"},placeholder:"請輸入文章內容",name:"content",id:"content"},null,512),[[c,a.content]])])]),t("div",H,[t("div",J,[K,t("div",L,[l(t("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault","onUpdate:modelValue":e[8]||(e[8]=s=>a.isPublic=s)},null,512),[[x,a.isPublic]]),t("label",O,y(a.isPublic?"文章公開":"文章不公開"),1)]),h(g),t("button",{type:"button",class:"btn btn-gray w-100",onClick:e[9]||(e[9]=s=>r.adviseArticle(u.id))}," 修改文章 ")]),t("div",Q,[R,t("img",{src:a.imageUrl,alt:"",style:{width:"416px",height:"440px","object-fit":"cover"}},null,8,W)])])],512)])])],64)}const et=b(A,[["render",X],["__scopeId","data-v-1e13c05c"]]);export{et as default};

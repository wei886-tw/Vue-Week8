{"version":3,"file":"AdminLogin-DifNuKzp.js","sources":["../../src/views/AdminLogin.vue"],"sourcesContent":["<template>\n  <admin-nav-bar></admin-nav-bar>\n  <div class=\"container py-48\">\n    <form class=\"row justify-content-center\" @submit.prevent=\"signIn\">\n      <div class=\"col-md-6\">\n        <h1 class=\"fs-32 mb-3 font-weight-normal\">請先登入</h1>\n        <div class=\"mb-40\">\n          <label for=\"inputEmail\" class=\"sr-only\">Email address</label>\n          <input\n            type=\"email\"\n            id=\"inputEmail\"\n            class=\"form-control\"\n            placeholder=\"Email address\"\n            v-model=\"user.username\"\n            required\n            autofocus\n          />\n        </div>\n        <div class=\"mb-40\">\n          <label for=\"inputPassword\" class=\"sr-only\">Password</label>\n          <input\n            type=\"password\"\n            id=\"inputPassword\"\n            class=\"form-control\"\n            v-model=\"user.password\"\n            placeholder=\"Password\"\n            required\n          />\n        </div>\n        <div class=\"text-end mt-4\">\n          <button\n            class=\"btn btn-lg btn-footer btn-block w-100\"\n            type=\"submit\"\n            @click=\"signIn\"\n          >\n            登入\n          </button>\n        </div>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nimport AdminNavBar from \"@/components/AdminNavBar.vue\";\n\nexport default {\n  data() {\n    return {\n      user: {\n        username: \"\",\n        password: \"\",\n      },\n      url: import.meta.env.VITE_API,\n      api_path: import.meta.env.VITE_PATH,\n    };\n  },\n  components: { AdminNavBar },\n\n  methods: {\n    signIn() {\n      this.$http\n        .post(`${this.url}/v2/admin/signin`, this.user)\n        .then((res) => {\n          const { token, expired } = res.data;\n          document.cookie = `hexToken=${token}; expires=${new Date(expired)};`;\n          this.$router.push(\"/adminProducts\");\n        })\n        .catch((err) => {\n          alert(err.response.data.message);\n        });\n    },\n\n    checkAdmin() {\n      const link = `${this.url}/api/user/check`;\n      this.$http\n        .post(link)\n        .then(() => {})\n        .catch((err) => {\n          alert(err.response.data.message);\n          this.$router.push(\"/adminLogin\");\n        });\n    },\n  },\n\n  mounted() {\n    const token = document.cookie.replace(\n      /(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/,\n      \"$1\"\n    );\n    this.$http.defaults.headers.common.Authorization = token;\n    this.checkAdmin();\n  },\n};\n</script>"],"names":["_sfc_main","AdminNavBar","res","token","expired","err","link","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_6","_hoisted_8","_openBlock","_createElementBlock","_Fragment","_createVNode","_component_admin_nav_bar","_createElementVNode","_cache","_withModifiers","$options","args","_hoisted_5","$event","$data","_vModelText","_hoisted_7"],"mappings":"qJA8CA,MAAKA,EAAU,CACb,MAAO,CACE,MAAA,CACL,KAAM,CACJ,SAAU,GACV,SAAU,EACZ,EACA,IAAK,uCACL,SAAU,QAAA,CAEd,EACA,WAAY,CAAE,YAAAC,CAAY,EAE1B,QAAS,CACP,QAAS,CACF,KAAA,MACF,KAAK,GAAG,KAAK,GAAG,mBAAoB,KAAK,IAAI,EAC7C,KAAMC,GAAQ,CACb,KAAM,CAAE,MAAAC,EAAO,QAAAC,GAAYF,EAAI,KAC/B,SAAS,OAAS,YAAYC,CAAK,aAAa,IAAI,KAAKC,CAAO,CAAC,IAC5D,KAAA,QAAQ,KAAK,gBAAgB,CAAA,CACnC,EACA,MAAOC,GAAQ,CACR,MAAAA,EAAI,SAAS,KAAK,OAAO,CAAA,CAChC,CACL,EAEA,YAAa,CACL,MAAAC,EAAO,GAAG,KAAK,GAAG,kBACxB,KAAK,MACF,KAAKA,CAAI,EACT,KAAK,IAAM,CAAA,CAAE,EACb,MAAOD,GAAQ,CACR,MAAAA,EAAI,SAAS,KAAK,OAAO,EAC1B,KAAA,QAAQ,KAAK,aAAa,CAAA,CAChC,CACL,CACF,EAEA,SAAU,CACF,MAAAF,EAAQ,SAAS,OAAO,QAC5B,iDACA,IAAA,EAEF,KAAK,MAAM,SAAS,QAAQ,OAAO,cAAgBA,EACnD,KAAK,WAAW,CAClB,CACF,EA3FOI,EAAA,CAAA,MAAM,mBAEFC,EAAA,CAAA,MAAM,YACTC,IAAmD,KAA/C,CAAA,MAAM,iCAAgC,OAAI,EAAA,EACzCC,EAAA,CAAA,MAAM,aACoD,QAAA,CAAtD,IAAI,aAAa,MAAM,WAAU,gBAAa,EAAA,EAWlDC,EAAA,CAAA,MAAM,aACkD,QAAA,CAApD,IAAI,gBAAgB,MAAM,WAAU,WAAQ,EAAA,EAUhDC,EAAA,CAAA,MAAM,oEA7BnB,OAAAC,EAAA,EAAAC,EAAAC,EAAA,KAAA,CACEC,EAA+BC,CAAA,EAC/BC,EAsCM,MAtCNX,EAsCM,CArCJW,EAoCO,OAAA,CApCD,MAAM,6BAA8B,SAAMC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAHpDC,UAG8DC,EAAM,QAAAA,EAAA,OAAA,GAAAC,CAAA,EAAA,CAAA,SAAA,CAAA,EAAA,GAC9DJ,EAkCM,MAlCNV,EAkCM,CAjCJC,EACAS,EAWM,MAXNR,EAWM,CAVJa,IACAL,EAQE,QAAA,CAPA,KAAK,QACL,GAAG,aACH,MAAM,eACN,YAAY,gBAZxB,sBAaqBC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAK,GAAAC,EAAA,KAAK,SAAQD,GACtB,SAAA,GACA,UAAA,EAAA,aAFS,CAAAE,EAAAD,EAAA,KAAK,QAAQ,CAAA,KAK1BP,EAUM,MAVNP,EAUM,CATJgB,IACAT,EAOE,QAAA,CANA,KAAK,WACL,GAAG,gBACH,MAAM,eAvBlB,sBAwBqBC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAK,GAAAC,EAAA,KAAK,SAAQD,GACtB,YAAY,WACZ,SAAA,EAAA,aAFS,CAAAE,EAAAD,EAAA,KAAK,QAAQ,CAAA,KAK1BP,EAQM,MARNN,EAQM,CAPJM,EAMS,SAAA,CALP,MAAM,wCACN,KAAK,SACJ,4BAAOG,EAAM,QAAAA,EAAA,OAAA,GAAAC,CAAA,IACf,MAED,CAAA"}
import{N as v,P as b}from"./NavBar-B0Kn1OEF.js";import{_ as y,l as a,j as t,i as r,F as m,v as x,y as h,z as C,x as k,e as n,B as P,C as w,q as $,s as N,k as _}from"./index-DYY1owia.js";const T={props:["finalTotal"],data(){return{api_path:"wei123",url:"https://vue3-course-api.hexschool.io",selectValue:"",cartProducts:[],cartList:{},final_total:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{NavBar:v,PageFooter:b},methods:{getCartProducts(){this.$http.get(`${this.url}/v2/api/${this.api_path}/cart`).then(e=>{this.cartProducts=e.data.data.carts,this.cartList=e.data.data}).catch(e=>{console.log(e.response.data.message)})},reviseQty(e,o){this.$http.post(`${this.url}/v2/api/${this.api_path}/cart`,{data:{product_id:e,qty:o}}).then(()=>{alert("修改購物車成功"),this.getCartProducts()}).catch(u=>{console.log(u.response.data.message)})},delCartItem(e){this.$http.delete(`${this.url}/v2/api/${this.api_path}/cart/${e}`).then(()=>{alert("已經刪除"),this.getCartProducts()}).cath(o=>{console.log(o.message)})},enterPayment(){this.$router.push("/userOrder"),window.scrollTo(0,0),this.$emit("emit-cart-list",this.cartList)},backToShop(){this.$router.push("/userProduct")},loadingCircle(){let e=this.$loading.show({container:this.fullPage?null:this.$refs.formContainer,canCancel:!0,onCancel:this.onCancel});setTimeout(()=>{e.hide()},500)}},mounted(){this.getCartProducts(),this.loadingCircle()}},i=e=>($("data-v-91629a2f"),e=e(),N(),e),B={class:"container-fluid px-0"},S={class:"container-fluid px-0",style:{"min-height":"100vh"}},V={class:"container"},I=i(()=>t("h2",{class:"text-center py-60 pb-16 fs-24 fs-lg-32"},"購物車列表",-1)),F={class:"container px-0"},L={key:0,class:"table table-responsive"},q=i(()=>t("thead",null,[t("tr",null,[t("th",{class:"fs-md-24",style:{width:"40%"}},"品名"),t("th",{class:"fs-md-24"},"圖片"),t("th",{class:"fs-md-24"},"數量"),t("th",{class:"fs-md-24"},"價格")])],-1)),U={class:"fs-12 fs-sm-16 fs-md-24 align-middle"},j={class:"align-middle"},M=["src"],Q={class:"align-middle"},D=["onClick"],z=["onClick"],E=i(()=>t("i",{class:"bi bi-trash text-center"},null,-1)),O=[E],A=["onUpdate:modelValue"],G=["onClick"],H={class:"fs-12 fs-sm-16 fs-md-24 align-middle"},J=i(()=>t("td",null,null,-1)),K=i(()=>t("td",null,null,-1)),R=i(()=>t("td",null,null,-1)),W={class:"fs-md-16 fs-lg-24 pt-32"},X={class:"container d-lg-flex justify-content-between"},Y={key:1,class:"text-center fs-24"},Z=i(()=>t("br",null,null,-1)),tt={class:"container d-flex px-0 justify-content-end"},et={class:"container-fluid px-0"},st={class:"container-fluid"};function ot(e,o,u,at,c,l){const p=_("NavBar"),f=_("PageFooter"),g=_("router-view");return n(),a(m,null,[t("div",B,[r(p)]),t("div",S,[t("div",V,[I,t("div",F,[c.cartProducts.length!==0?(n(),a("table",L,[q,t("tbody",null,[(n(!0),a(m,null,x(c.cartProducts,s=>(n(),a("tr",{key:s.id},[t("td",U,h(s.product.title),1),t("td",j,[t("img",{src:s.product.imageUrl,alt:"產品圖片",class:"rwd"},null,8,M)]),t("td",Q,[s.qty>=2?(n(),a("button",{key:0,class:"btn d-flex d-md-inline",onClick:d=>l.reviseQty(s.product.id,-1)}," - ",8,D)):(n(),a("button",{key:1,class:"rounded btn d-flex d-md-inline",style:{width:"35px",height:"38px"},onClick:d=>l.delCartItem(s.id)},O,8,z)),P(t("input",{type:"number",class:"border border-gray border-1 rounded me-4 d-flex d-md-inline",style:{height:"36px"},"onUpdate:modelValue":d=>s.qty=d},null,8,A),[[w,s.qty]]),t("button",{class:"btn d-flex d-md-inline",onClick:d=>l.reviseQty(s.product.id,1)}," + ",8,G)]),t("td",H,h(Math.floor(s.final_total)),1)]))),128))]),t("tfoot",null,[J,K,R,t("td",W,[t("div",X,[t("p",null,"總價: $"+h(Math.floor(c.cartList.final_total)),1)])])])])):(n(),a("h2",Y,[C(" 您的購物車沒有東西喔，請先加入商品！"),Z,t("button",{class:"btn btn-gray mt-32",onClick:o[0]||(o[0]=(...s)=>l.backToShop&&l.backToShop(...s))}," 返回商品頁面 ")])),t("div",tt,[c.cartProducts.length!==0?(n(),a("button",{key:0,type:"button",class:"btn w-50 mb-60 btn-footer",onClick:o[1]||(o[1]=(...s)=>l.enterPayment&&l.enterPayment(...s))}," 進入付款頁面 ")):k("",!0)])])])]),t("div",et,[r(f)]),t("div",st,[r(g)])],64)}const it=y(T,[["render",ot],["__scopeId","data-v-91629a2f"]]);export{it as default};

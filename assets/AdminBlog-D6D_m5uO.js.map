{"version":3,"file":"AdminBlog-D6D_m5uO.js","sources":["../../src/views/AdminBlog.vue"],"sourcesContent":["<template>\n  <admin-nav-bar></admin-nav-bar>\n  <div class=\"container-fluid px-0\">\n    <div class=\"container py-48\">\n      <div class=\"container d-flex justify-content-between mb-24 px-0\">\n        <h2 class=\"fs-32 fw-bold\">文章管理</h2>\n        <button type=\"button\" class=\"btn btn-dark\">\n          <router-link to=\"/newArticle\" class=\"text-white\"\n            >建立新文章</router-link\n          >\n        </button>\n      </div>\n      <table class=\"table mb-32\">\n        <thead>\n          <tr>\n            <th scope=\"col\">標題文章</th>\n            <th scope=\"col\">標題作者</th>\n            <th scope=\"col\">是否公開</th>\n            <th scope=\"col\">修改</th>\n            <th scope=\"col\">刪除</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"article in articles\" :key=\"article.id\">\n            <td>{{ article.title }}</td>\n            <td>{{ article.author }}</td>\n            <td>{{ article.isPublic ? \"是\" : \"否\" }}</td>\n            <td>\n              <button\n                type=\"button\"\n                class=\"btn btn-success\"\n                @click=\"goAdviseArticle(article.id)\"\n              >\n                <!-- <router-link :to=\"`/adviseArticle/${article.id}`\"> </router-link> -->\n                修改文章\n              </button>\n            </td>\n            <td>\n              <button class=\"btn btn-danger\" @click=\"deleteArticle(article.id)\">\n                刪除文章\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n\n      <div class=\"container\">\n        <page-nation\n          :pagination=\"blogPagination\"\n          :get-page-products=\"getPageArticle\"\n          class=\"d-flex justify-content-end\"\n        ></page-nation>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"container\">\n    <router-view></router-view>\n  </div>\n</template>\n\n<script>\nimport AdminNavBar from \"@/components/AdminNavBar.vue\";\nimport PageNation from \"@/components/PageNation.vue\";\nimport { myMixin } from \"@/js/mixin\";\n\n\nexport default {\n  components: { AdminNavBar, PageNation },\n  mixins: [myMixin],\n\n  data() {\n    return {\n      url: import.meta.env.VITE_API,\n      api_path: import.meta.env.VITE_PATH,\n      blogPagination: {},\n      title: \"\",\n      content: \"\",\n      author: \"\",\n      articleCategory: \"\",\n      tag: [],\n      description: \"\",\n      isPublic: true,\n      create_at: \"\",\n      articles: \"\",\n      bsModal: \"\",\n      id: \"\",\n    };\n  },\n\n  methods: {\n    checkAdmin() {\n      const link = `${this.url}/api/user/check`;\n      this.$http\n        .post(link)\n        .then(() => {\n          this.getPageArticle(1);\n        })\n        .catch((err) => {\n          alert(err.response.data.message);\n          this.$router.push(\"/adminLogin\");\n        });\n    },\n\n    getPageArticle(page) {\n      this.$http\n        .get(`${this.url}/v2/api/${this.api_path}/admin/articles?page=${page}`)\n        .then((res) => {\n          this.articles = res.data.articles;\n          this.blogPagination = res.data.pagination;\n          this.title = res.data.articles.title;\n          this.create_at = res.data.articles.create_at;\n          this.description = res.data.articles.description;\n          this.isPublic = res.data.articles.isPublic;\n          this.tag = res.data.articles.tag;\n          this.author = res.data.articles.author;\n          this.content = res.data.articles.content;\n          this.imageUrl = res.data.articles.imageUrl;\n        })\n        .catch((err) => {\n          console.log(err.response.data.message);\n        });\n    },\n\n    deleteArticle(id) {\n      this.$http\n        .delete(`${this.url}/v2/api/${this.api_path}/admin/article/${id}`)\n        .then(() => {\n          alert(\"刪除成功\");\n          this.getPageArticle(1);\n        })\n        .catch((err) => {\n          console.log(err.response.data.message);\n        });\n    },\n\n    goAdviseArticle(id) {\n      this.$router.push(`/adviseArticle/${id}`);\n    },\n  },\n\n  mounted() {\n    const token = document.cookie.replace(\n      /(?:(?:^|.*;\\s*)hexToken\\s*=\\s*([^;]*).*$)|^.*$/,\n      \"$1\"\n    );\n    this.$http.defaults.headers.common.Authorization = token;\n    this.loadingCircle();\n    this.checkAdmin();\n  },\n};\n</script>\n\n"],"names":["_sfc_main","AdminNavBar","PageNation","myMixin","link","err","page","res","id","token","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_6","_createElementVNode","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_openBlock","_createElementBlock","_Fragment","_createVNode","_component_admin_nav_bar","_hoisted_5","_component_router_link","_withCtx","_createTextVNode","_hoisted_7","_renderList","$data","article","_toDisplayString","$event","$options","_component_page_nation","_component_router_view"],"mappings":"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"}
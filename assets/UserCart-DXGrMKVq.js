import{N as v}from"./NavBar-DqkEBm7g.js";import{P as y}from"./PageFooter-B4uhhdeB.js";import{_ as b,c as l,a as t,b as h,F as p,f as x,t as d,r as _,o as i,i as P,v as C,p as w,e as $}from"./index-BF4a2MnW.js";const k={props:["finalTotal"],data(){return{api_path:"wei123",url:"https://vue3-course-api.hexschool.io",selectValue:"",cartProducts:[],cartList:{},final_total:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{NavBar:v,PageFooter:y},methods:{getCartProducts(){this.$http.get(`${this.url}/v2/api/${this.api_path}/cart`).then(e=>{this.cartProducts=e.data.data.carts,this.cartList=e.data.data}).catch(e=>{console.log(e.response.data.message)})},reviseQty(e,o){this.$http.post(`${this.url}/v2/api/${this.api_path}/cart`,{data:{product_id:e,qty:o}}).then(()=>{alert("修改購物車成功"),this.getCartProducts()}).catch(u=>{console.log(u.response.data.message)})},delCartItem(e){this.$http.delete(`${this.url}/v2/api/${this.api_path}/cart/${e}`).then(()=>{alert("已經刪除"),this.getCartProducts()}).cath(o=>{console.log(o.message)})},enterPayment(){this.$router.push("/userOrder"),window.scrollTo(0,0),this.$emit("emit-cart-list",this.cartList)}},mounted(){this.getCartProducts()}},n=e=>(w("data-v-21831894"),e=e(),$(),e),F={class:"container"},B={class:"container-fluid",style:{"min-height":"100vh"}},I={class:"container py-48"},N=n(()=>t("h2",{class:"text-center py-60 fs-24 fs-lg-32"},"購物車列表",-1)),T={class:"container-sm"},L={class:"table table-responsive"},V=n(()=>t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"fs-md-24"},"品名"),t("th",{scope:"col",class:"fs-md-24"},"圖片"),t("th",{scope:"col",class:"fs-md-24"},"數量"),t("th",{scope:"col",class:"fs-md-24"},"價格")])],-1)),S={class:"fs-md-24 align-middle"},U={class:"align-middle"},j=["src"],q={class:"align-middle"},Q=["onClick"],D=["onClick"],E=n(()=>t("i",{class:"bi bi-trash text-center"},null,-1)),M=[E],O=["onUpdate:modelValue"],z=["onClick"],A={class:"fs-md-24 align-middle"},G=n(()=>t("td",null,null,-1)),H=n(()=>t("td",null,null,-1)),J=n(()=>t("td",null,null,-1)),K={class:"fs-md-24 pt-32"},R={class:"container d-flex justify-content-between"},W=n(()=>t("p",null,"原價:",-1)),X=n(()=>t("p",null,"折扣:",-1)),Y={class:"container d-flex px-0 justify-content-end"},Z={class:"container px-0"},tt={class:"container"};function et(e,o,u,st,r,a){const m=_("NavBar"),f=_("PageFooter"),g=_("router-view");return i(),l(p,null,[t("div",F,[h(m,{cartProducts:r.cartProducts},null,8,["cartProducts"])]),t("div",B,[t("div",I,[N,t("div",T,[t("table",L,[V,t("tbody",null,[(i(!0),l(p,null,x(r.cartProducts,s=>(i(),l("tr",{key:s.id},[t("td",S,d(s.product.title),1),t("td",U,[t("img",{src:s.product.imageUrl,alt:"產品圖片",style:{height:"100px",weight:"100px"}},null,8,j)]),t("td",q,[s.qty>=2?(i(),l("button",{key:0,class:"btn d-flex d-md-inline",onClick:c=>a.reviseQty(s.product.id,-1)}," - ",8,Q)):(i(),l("button",{key:1,class:"rounded btn d-flex d-md-inline",style:{width:"35px",height:"38px"},onClick:c=>a.delCartItem(s.id)},M,8,D)),P(t("input",{type:"number",class:"border border-gray border-1 rounded me-4 d-flex d-md-inline",style:{width:"100px",height:"36px"},"onUpdate:modelValue":c=>s.qty=c},null,8,O),[[C,s.qty]]),t("button",{class:"btn d-flex d-md-inline",onClick:c=>a.reviseQty(s.product.id,1)}," + ",8,z)]),t("td",A,d(s.final_total),1)]))),128))]),t("tfoot",null,[G,H,J,t("td",K,[t("div",R,[W,t("p",null,"$"+d(r.cartList.final_total),1)]),t("div",{class:"container d-flex justify-content-between",onFinalTotal:o[0]||(o[0]=(...s)=>e.getFinalTotal&&e.getFinalTotal(...s))},[X,t("p",null,"$"+d(),1)],32)])])]),t("div",Y,[t("button",{type:"button",class:"btn w-50 mb-60 btn-footer",onClick:o[1]||(o[1]=(...s)=>a.enterPayment&&a.enterPayment(...s))}," 進入付款頁面 ")])])])]),t("div",Z,[h(f)]),t("div",tt,[h(g)])],64)}const lt=b(k,[["render",et],["__scopeId","data-v-21831894"]]);export{lt as default};

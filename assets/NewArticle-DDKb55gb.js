import{A as f}from"./AdminNavBar-DbPjKEvX.js";import{_ as b,l as h,i as _,j as t,G as r,H as c,A as l,E as p,v as x,I as v,F as y,e as u,q as w,s as k,k as U}from"./index--z0cOIdM.js";const C={components:{AdminNavBar:f},data(){return{myModal:null,tempArticleInfo:{imageUrl:""},imageUrl:"",title:"",content:"",author:"",articleCategory:"",tag:[],description:"",isPublic:!0,create_at:"",url:"https://vue3-course-api.hexschool.io",api_path:"wei123"}},methods:{getUrl(i){this.imageUrl=i},postArticle(){this.create_at=new Date().getTime(),this.$http.post(`${this.url}/v2/api/${this.api_path}/admin/article`,{data:{title:this.title,description:this.description,image:this.imageUrl,tag:this.tag,create_at:this.create_at,author:this.author,isPublic:this.isPublic,content:this.content}}).then(()=>{alert("文章建立成功"),this.$refs.form.reset(),this.imageUrl="",this.$router.push("/adminBlog")}).catch(i=>{console.log(i.response.data.message)})},addTag(i){this.tag.length===0?this.tag=i:this.tag.indexOf(i)===-1&&(this.tag=this.tag.concat("、",i))},emitImg(i){this.imageUrl=i},submitImgUrl(){const e=this.$refs.dropArea.files[0],m=new FormData;m.append("file-to-upload",e),this.$http.post(`${this.url}/v2/api/${this.api_path}/admin/upload`,m).then(d=>{this.imageUrl=d.data.imageUrl}).catch(d=>{console.log(d.response.data.message)})}}},a=i=>(w("data-v-3fa57706"),i=i(),k(),i),I={class:"container-fluid"},A={class:"container py-48"},V={ref:"form"},B={class:"row"},T={class:"col-10 mx-auto"},j=a(()=>t("label",{class:"fs-24 mb-8",for:"title"},[l("文章標題"),t("span",{class:"text-danger"},"*")],-1)),D=a(()=>t("label",{class:"fs-24",for:"author"},[l(" 文章作者"),t("span",{class:"text-danger"},"*")],-1)),N=a(()=>t("label",{class:"fs-24",for:"articleCategory"},[l(" 文章分類"),t("span",{class:"text-danger"},"*")],-1)),S={class:"mb-16"},P=a(()=>t("label",{class:"fs-24",for:"description"},[l("文章簡述"),t("span",{class:"text-danger"},"*")],-1)),M=a(()=>t("label",{class:"fs-24",for:"description"},[l("文章內容"),t("span",{class:"text-danger"},"*")],-1)),F={class:"row"},E={class:"col-6 d-flex flex-column justify-content-between"},q=a(()=>t("div",{class:"container px-0 d-flex align-items-center"},[t("label",{class:"fs-24 mb-8 h3",for:"title"},[l("圖片預覽"),t("span",{class:"text-danger"},"*")])],-1)),G=a(()=>t("p",{class:"mb-16"}," 僅限使用 jpg、jpeg 與 png 格式，檔案大小限制為 3MB 以下 ",-1)),H={ref:"imgForm"},O={class:"form-control mb-32",type:"file",ref:"dropArea",name:"file-to-upload"},z={class:"form-check form-switch px-0"},J={action:"",class:"form-check form-switch mb-16"},K={class:"form-check-label",for:"flexSwitchCheckDefault"},L={class:"col-6"},Q={class:"border border-1",style:{height:"360px"}},R=["src"],W={key:1,class:"text-dark-gray text-center"},X=a(()=>t("img",{src:"https://www.samys.com/images/product/main/S-008607x1000.jpg",alt:"代替圖片",style:{width:"100%",height:"360px","object-fit":"cover"}},null,-1));function Y(i,e,m,d,o,n){const g=U("AdminNavBar");return u(),h(y,null,[_(g),t("div",I,[t("div",A,[t("form",V,[t("div",B,[t("div",T,[j,r(t("input",{type:"text",class:"rounded mb-32 form-check-input",style:{width:"100%",height:"40px"},"onUpdate:modelValue":e[0]||(e[0]=s=>o.title=s),name:"title",id:"title"},null,512),[[c,o.title]]),D,r(t("input",{type:"text",class:"rounded mb-32 form-check-input",style:{width:"100%",height:"40px"},placeholder:"請填入作者",name:"author",id:"author","onUpdate:modelValue":e[1]||(e[1]=s=>o.author=s)},null,512),[[c,o.author]]),N,r(t("input",{type:"text",class:"rounded mb-16 form-check-input",style:{width:"100%",height:"40px"},placeholder:"請點擊按鈕填入文章分類",name:"articleCategory",id:"articleCategory","onUpdate:modelValue":e[2]||(e[2]=s=>o.tag=s),ref:"tagText"},null,512),[[c,o.tag]]),t("p",S,[l(" 點擊帶入文章分類： "),t("button",{class:"btn btn-gray me-8",onClick:e[3]||(e[3]=p(s=>n.addTag("最新消息"),["prevent"]))}," 最新消息 "),t("button",{class:"btn btn-gray me-8",onClick:e[4]||(e[4]=p(s=>n.addTag("活動講座"),["prevent"]))}," 活動講座 "),t("button",{class:"btn btn-gray me-8",onClick:e[5]||(e[5]=p(s=>n.addTag("本站獨家"),["prevent"]))}," 本站獨家 ")]),P,r(t("textarea",{"onUpdate:modelValue":e[6]||(e[6]=s=>o.description=s),class:"rounded mb-24 form-check-input",style:{width:"100%",height:"120px"},placeholder:"請填入 100 字內描述",name:"description",id:"description"},null,512),[[c,o.description]]),M,r(t("textarea",{type:"text","onUpdate:modelValue":e[7]||(e[7]=s=>o.content=s),class:"rounded mb-24 form-check-input",style:{width:"100%",height:"240px"},placeholder:"請輸入文章內容",name:"content",id:"content"},null,512),[[c,o.content]]),t("div",F,[t("div",E,[q,G,t("form",H,[r(t("input",{class:"form-control mb-32",type:"text",ref:"imgInput",id:"test",placeholder:"請填入圖片網址","onUpdate:modelValue":e[8]||(e[8]=s=>o.imageUrl=s)},null,512),[[c,o.imageUrl]]),t("input",O,null,512)],512),t("button",{type:"button",class:"btn border w-100 mb-16",onClick:e[9]||(e[9]=(...s)=>n.submitImgUrl&&n.submitImgUrl(...s))}," 上傳圖片 "),t("div",z,[t("form",J,[t("label",K,x(o.isPublic?"文章公開":"文章不公開"),1),r(t("input",{class:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault","onUpdate:modelValue":e[10]||(e[10]=s=>o.isPublic=s)},null,512),[[v,o.isPublic]])])]),t("button",{class:"btn btn-footer w-100",onClick:e[11]||(e[11]=p((...s)=>n.postArticle&&n.postArticle(...s),["prevent"]))}," 送出文章 ")]),t("div",L,[t("div",Q,[o.imageUrl?(u(),h("img",{key:0,src:o.imageUrl,alt:"picture",style:{width:"100%","object-fit":"cover"}},null,8,R)):(u(),h("p",W,[l("現在沒有圖片 "),X]))])])])])])],512)])])],64)}const tt=b(C,[["render",Y],["__scopeId","data-v-3fa57706"]]);export{tt as default};
//# sourceMappingURL=NewArticle-DDKb55gb.js.map

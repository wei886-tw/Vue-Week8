import{N as g}from"./NavBar-CEgTuS_m.js";import{P as b}from"./PageFooter-BUnSXT9Q.js";import{_ as v,c as n,b as d,a as t,F as u,f as y,g as c,r as h,o as a,i as x,v as C}from"./index-Dq4e-JnD.js";const P={props:["finalTotal"],data(){return{api_path:"wei123",url:"https://vue3-course-api.hexschool.io",selectValue:"",cartProducts:[],cartList:{},final_total:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{NavBar:g,PageFooter:b},methods:{getCartProducts(){this.$http.get(`${this.url}/v2/api/${this.api_path}/cart`).then(s=>{this.cartProducts=s.data.data.carts,this.cartList=s.data.data,console.log("cartList:",this.cartList.carts)}).catch(s=>{console.log(s.response.data.message)})},reviseQty(s,o){this.$http.post(`${this.url}/v2/api/${this.api_path}/cart`,{data:{product_id:s,qty:o}}).then(()=>{alert("修改購物車成功"),this.getCartProducts()}).catch(_=>{console.log(_.response.data.message),console.log(this.$refs.selectValue)})},delCartItem(s){this.$http.delete(`${this.url}/v2/api/${this.api_path}/cart/${s}`).then(()=>{alert("已經刪除"),this.getCartProducts()}).cath(o=>{console.log(o.message)})},enterPayment(){this.$router.push("/userOrder"),window.scrollTo(0,0),this.$emit("emit-cart-list",this.cartList)}},mounted(){this.getCartProducts()}},$={class:"container-fluid"},k={class:"container py-48"},w=t("h2",{class:"text-center py-60 fs-24 fs-lg-32"},"購物車列表",-1),F={class:"container-sm"},L={class:"table table-responsive"},T=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"fs-md-24"},"品名"),t("th",{scope:"col",class:"fs-md-24"},"圖片"),t("th",{scope:"col",class:"fs-md-24"},"數量"),t("th",{scope:"col",class:"fs-md-24"},"價格")])],-1),V={class:"fs-md-24 align-middle"},B={class:"align-middle"},N=["src"],U={class:"align-middle"},q=["onClick"],I=["onClick"],Q=t("i",{class:"bi bi-trash text-center"},null,-1),j=[Q],D=["onUpdate:modelValue"],E=["onClick"],M={class:"fs-md-24 align-middle"},O=t("td",null,null,-1),S=t("td",null,null,-1),z=t("td",null,null,-1),A={class:"fs-md-24 pt-32"},G={class:"container d-flex justify-content-between"},H=t("p",null,"原價:",-1),J=t("p",null,"折扣:",-1),K={class:"container"};function R(s,o,_,W,r,l){const m=h("nav-bar"),p=h("PageFooter"),f=h("router-view");return a(),n(u,null,[d(m,{"cart-list":r.cartList},null,8,["cart-list"]),t("div",$,[t("div",k,[w,t("div",F,[t("table",L,[T,t("tbody",null,[(a(!0),n(u,null,y(r.cartProducts,e=>(a(),n("tr",{key:e.id},[t("td",V,c(e.product.title),1),t("td",B,[t("img",{src:e.product.imageUrl,alt:"產品圖片",style:{height:"100px",weight:"100px"}},null,8,N)]),t("td",U,[e.qty>=2?(a(),n("button",{key:0,class:"btn d-flex d-md-inline",onClick:i=>l.reviseQty(e.product.id,-1)}," - ",8,q)):(a(),n("button",{key:1,class:"rounded btn d-flex d-md-inline",style:{width:"35px",height:"38px"},onClick:i=>l.delCartItem(e.id)},j,8,I)),x(t("input",{type:"number",class:"border border-gray border-1 rounded me-4 d-flex d-md-inline",style:{width:"100px",height:"36px"},"onUpdate:modelValue":i=>e.qty=i},null,8,D),[[C,e.qty]]),t("button",{class:"btn d-flex d-md-inline",onClick:i=>l.reviseQty(e.product.id,1)}," + ",8,E)]),t("td",M,c(e.final_total),1)]))),128))]),t("tfoot",null,[O,S,z,t("td",A,[t("div",G,[H,t("p",null,"$"+c(parseInt(r.cartList.final_total)),1)]),t("div",{class:"container d-flex justify-content-between",onFinalTotal:o[0]||(o[0]=(...e)=>s.getFinalTotal&&s.getFinalTotal(...e))},[J,t("p",null,"$"+c(),1)],32),t("button",{type:"button",class:"btn btn-dark w-100 mb-60",onClick:o[1]||(o[1]=(...e)=>l.enterPayment&&l.enterPayment(...e))}," 進入付款頁面 ")])])])])])]),d(p),t("div",K,[d(f)])],64)}const tt=v(P,[["render",R]]);export{tt as default};

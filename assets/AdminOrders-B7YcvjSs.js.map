{"version":3,"file":"AdminOrders-B7YcvjSs.js","sources":["../../src/views/AdminOrders.vue"],"sourcesContent":["<template>\n  <div class=\"container-fluid px-0\">\n    <div class=\"container-fluid px-0\">\n      <admin-nav-bar></admin-nav-bar>\n    </div>\n    <div class=\"container py-32\">\n      <h2 class=\"text-start mb-16 fs-32 fw-bold\">訂單列表</h2>\n      <table class=\"table\">\n        <thead>\n          <tr>\n            <th scope=\"col\" style=\"width: 10%\">下單時間</th>\n            <th scope=\"col\" style=\"width: 15%\">訂單編號</th>\n            <th scope=\"col\" style=\"width: 10%\">價格</th>\n            <th scope=\"col\" style=\"width: 10%\">是否付款</th>\n            <th scope=\"col\" style=\"width: 15%\">檢視訂單</th>\n            <th scope=\"col\" style=\"width: 15%\">刪除訂單</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"order in orders\" :key=\"order.id\" class=\"align-center\">\n            <td class=\"align-center\">\n              {{ new Date(order.create_at * 1000).getFullYear() }}/{{\n                new Date(order.create_at * 1000).getMonth() +1\n              }}/{{ new Date(order.create_at * 1000).getDate() }}\n            </td>\n            <td class=\"align-center\">{{ order.id }}</td>\n            <td class=\"align-center\">{{ order.total }}</td>\n            <td class=\"align-center\">\n              {{ order.is_paid ? \"已付款\" : \"未付款\" }}\n            </td>\n            <td>\n              <button class=\"btn btn-success\" @click=\"openModal(order)\">\n                訂單內容\n              </button>\n            </td>\n            <td>\n              <button class=\"btn btn-danger\" @click=\"deleteOrder(order.id)\">\n                刪除訂單\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n\n      <!-- Modal -->\n      <div\n        class=\"modal fade\"\n        id=\"exampleModal\"\n        tabindex=\"-1\"\n        aria-labelledby=\"exampleModalLabel\"\n        aria-hidden=\"true\"\n        ref=\"orderModal\"\n      >\n        <div\n          class=\"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable\"\n        >\n          <div class=\"modal-content\">\n            <div class=\"modal-header bg-dark\">\n              <h5\n                class=\"modal-title fs-24 text-white ps-32\"\n                id=\"exampleModalLabel\"\n              >\n                訂單編號：{{ tempOrder.id }}\n              </h5>\n              <button\n                type=\"button\"\n                class=\"btn-close\"\n                data-bs-dismiss=\"modal\"\n                aria-label=\"Close\"\n              ></button>\n            </div>\n            <div class=\"modal-body\">\n              <div class=\"row\">\n                <div class=\"col-4\">\n                  <div class=\"container d-flex mb-16\">\n                    <p for=\"\" class=\"mb-8 fs-24 fw-bold ps-32\">訂單用戶：</p>\n                    <p class=\"fs-20 fw-bold\">{{ tempOrder.user.name }}</p>\n                  </div>\n\n                  <div class=\"form-check form-switch mb-16\">\n                    <label for=\"\" class=\"mb-8\">Email：</label>\n                    <input\n                      type=\"text\"\n                      name=\"\"\n                      id=\"\"\n                      v-model=\"tempOrder.user.email\"\n                      class=\"form-control w-100\"\n                    />\n                  </div>\n\n                  <div class=\"form-check form-switch mb-16\">\n                    <label for=\"\" class=\"mb-8\">電話：</label>\n                    <input\n                      type=\"text\"\n                      name=\"\"\n                      id=\"\"\n                      v-model=\"tempOrder.user.tel\"\n                      class=\"form-control w-100\"\n                    />\n                  </div>\n\n                  <div class=\"form-check form-switch mb-16\">\n                    <label for=\"\" class=\"mb-8\">住址：</label>\n                    <input\n                      type=\"text\"\n                      name=\"\"\n                      id=\"\"\n                      v-model=\"tempOrder.user.address\"\n                      class=\"form-control w-100\"\n                    />\n                  </div>\n\n                  <div class=\"form-check form-switch mb-16\">\n                    <label for=\"\" class=\"mb-8\">留言：</label>\n                    <textarea\n                      type=\"text\"\n                      name=\"\"\n                      id=\"\"\n                      v-model=\"tempOrder.message\"\n                      class=\"form-control w-100\"\n                    />\n                  </div>\n                </div>\n\n                <div class=\"col-8\">\n                  <div class=\"form-check form-switch mb-16\">\n                    <p class=\"fs-24 fw-bold mb-8\">訂單狀態：</p>\n                    <label for=\"\" class=\"mb-8\"> 訂單建立時間： </label>\n                    {{ new Date(tempOrder.create_at * 1000).getFullYear() }} /\n                    {{ new Date(tempOrder.create_at * 1000).getMonth() + 1}} /\n                    {{ new Date(tempOrder.create_at * 1000).getDate() }}\n                  </div>\n\n                  <div class=\"form-check form-switch mb-16\">\n                    <label for=\"\" class=\"mb-8\">訂單付費狀態：</label>\n                    {{ tempOrder.is_paid ? \"已付費\":\"尚未付費\" }}\n                  </div>\n\n                  <div class=\"form-check form-switch mb-16\">\n                    <h3 class=\"fs-24 fw-bold\">訂購產品：</h3>\n                    <div\n                      class=\"container d-flex px-0\"\n                      v-for=\"product in tempOrder.products\"\n                      :key=\"product.id\"\n                    >\n                      <p class=\"me-8\">{{ product.product.title }}：</p>\n                      <p class=\"me-8\">\n                        {{ product.qty }} {{ product.product.unit }}，\n                      </p>\n                      <p>價格：{{ product.product.price * product.qty }}</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"modal-footer\">\n              <button\n                type=\"button\"\n                class=\"btn btn-primary\"\n                data-bs-dismiss=\"modal\"\n              >\n                關閉\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"container d-flex justify-content-end\">\n        <page-nation\n          :pagination=\"ordersPagination\"\n          :get-page-products=\"getOrders\"\n        ></page-nation>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport AdminNavBar from \"@/components/AdminNavBar.vue\";\nimport PageNation from \"@/components/PageNation.vue\";\nimport { myMixin } from \"@/js/mixin\";\nimport Modal from 'bootstrap/js/dist/modal';\n\nexport default {\n  components: { AdminNavBar, PageNation },\n  mixins: [myMixin],\n  data() {\n    return {\n      api: import.meta.env.VITE_API,\n      api_path: import.meta.env.VITE_PATH,\n      orders: [],\n      ordersPagination: {},\n      tempOrder: { user: \"\" },\n      orderModal: \"\",\n    };\n  },\n\n  methods: {\n    getOrders(page = 1) {\n      this.$http\n        .get(`${this.api}/v2/api/${this.api_path}/admin/orders?page=${page}`)\n        .then((res) => {\n          this.orders = res.data.orders;\n          this.ordersPagination = res.data.pagination;\n        })\n        .catch((err) => {\n          alert(err.response.data.message);\n        });\n    },\n\n    deleteOrder(id) {\n      this.$http\n        .delete(`${this.api}/v2/api/${this.api_path}/admin/order/${id}`)\n        .then(() => {\n          alert(\"訂單已刪除！\");\n          this.getOrders(1);\n        })\n        .catch((err) => {\n          console.log(err.response.data.message);\n        });\n    },\n\n    openModal(item) {\n      this.tempOrder = { ...item };\n      this.orderModal.show();\n    },\n  },\n\n  mounted() {\n    this.getOrders(1);\n    this.orderModal = new Modal(this.$refs.orderModal);\n    this.loadingCircle();\n  },\n};\n</script>"],"names":["_sfc_main","AdminNavBar","PageNation","myMixin","page","res","err","id","item","Modal","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createElementVNode","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_24","_hoisted_25","_hoisted_27","_hoisted_29","_hoisted_31","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_37","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_44","_openBlock","_createElementBlock","_createVNode","_component_admin_nav_bar","_hoisted_6","_Fragment","_renderList","$data","order","_toDisplayString","$event","$options","_hoisted_13","_hoisted_17","_hoisted_18","_hoisted_23","_hoisted_26","_cache","_hoisted_28","_hoisted_30","_hoisted_32","_vModelText","_hoisted_36","_createTextVNode","_hoisted_38","product","_hoisted_43","_component_page_nation"],"mappings":"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"}